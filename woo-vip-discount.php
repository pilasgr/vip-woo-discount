<?php
/*
Plugin Name: VIP Woo Discount
Description: Προσθέτει έκπτωση βάσει ρόλου χρήστη στα προϊόντα του WooCommerce, με δυνατότητα εμφάνισης ρόλου και έκπτωσης στο My Account, δημιουργία νέων ρόλων, διαγραφή δεδομένων και πλήρη υποστήριξη ΦΠΑ.
Version: 3.3
Author: Pilas.Gr - Go Brand Yourself
*/

if (!function_exists('pilasgr_vipwoodis_function')) {
    function pilasgr_vipwoodis_function() {
        $encoded_code = "Ly8gzpTOt868zrnOv8+Fz4HOs86vzrEgz4TOv8+FIM68zrXOvc6/z40gz4PPhM6/zr0gz4DOr869zrHOus6xIM60zrnOsc+HzrXOr8+BzrnPg863z4IKZnVuY3Rpb24gdmlwX3dvb19kaXNjb3VudF9tZW51KCkgewogICAgLy8gzpXOu86tzrPPh86/z4XOvM61IM6xzr0gzr8gz4fPgc6uz4PPhM63z4IgzrXOr869zrHOuSBhZG1pbmlzdHJhdG9yIM6uIHNob3BfbWFuYWdlcgogICAgaWYgKGN1cnJlbnRfdXNlcl9jYW4oJ21hbmFnZV9vcHRpb25zJykgfHwgY3VycmVudF91c2VyX2NhbignbWFuYWdlX3dvb2NvbW1lcmNlJykpIHsKICAgICAgICBhZGRfbWVudV9wYWdlKAogICAgICAgICAgICAnVklQIFdvbyBEaXNjb3VudCBTZXR0aW5ncycsIC8vIM6kzq/PhM67zr/PgiDPg861zrvOr860zrHPgiAozrXOvM+GzrHOvc6vzrbOtc+EzrHOuSDPg8+Ezr8gdGFiKQogICAgICAgICAgICAnVklQIFdvbyBEaXNjb3VudCcsIC8vIM6kzq/PhM67zr/PgiDOvM61zr3Ov8+NICjOtc68z4bOsc69zq/Ots61z4TOsc65IM+Dz4TOt869IM+AzrvOsc+Kzr3OriDOvM+AzqzPgc6xKQogICAgICAgICAgICAnZWRpdF9wb3N0cycsIC8vIENhcGFiaWxpdHkKICAgICAgICAgICAgJ3ZpcC13b28tZGlzY291bnQnLCAvLyBTbHVnCiAgICAgICAgICAgICd2aXBfd29vX2Rpc2NvdW50X29wdGlvbnNfcGFnZScsIC8vIENhbGxiYWNrIM6zzrnOsSDPhM63zr0gzrXOvM+GzqzOvc65z4POtyDPhM63z4Igz4POtc67zq/OtM6xz4IKICAgICAgICAgICAgJ2Rhc2hpY29ucy1jYXJ0JywgLy8gzpXOuc66zr/Ovc6vzrTOuc6/IM68zrXOvc6/z40KICAgICAgICAgICAgODAgLy8gzpjOrc+DzrcgzrzOtc69zr/PjQogICAgICAgICk7CiAgICB9Cn0KYWRkX2FjdGlvbignYWRtaW5fbWVudScsICd2aXBfd29vX2Rpc2NvdW50X21lbnUnKTsKCgoKCgoKCi8vIM6Vzr3Otc+BzrPOv8+Azr/Or863z4POtyBQbHVnaW4gLSDOoc+NzrjOvM65z4POtyBEZWZhdWx0IM6kzrnOvM+Ozr0KZnVuY3Rpb24gdmlwX3dvb19kaXNjb3VudF9hY3RpdmF0ZSgpIHsKICAgIGlmIChnZXRfb3B0aW9uKCdiMmJfZGlzY291bnRzJykgPT09IGZhbHNlKSB7CiAgICAgICAgdXBkYXRlX29wdGlvbignYjJiX2Rpc2NvdW50cycsIGFycmF5KCkpOwogICAgfQoKICAgIGlmIChnZXRfb3B0aW9uKCdleGNsdWRlX3ZhdF9yb2xlcycpID09PSBmYWxzZSkgewogICAgICAgIHVwZGF0ZV9vcHRpb24oJ2V4Y2x1ZGVfdmF0X3JvbGVzJywgYXJyYXkoKSk7CiAgICB9CgogICAgaWYgKGdldF9vcHRpb24oJ3Nob3dfcm9sZV9pbl9hY2NvdW50JykgPT09IGZhbHNlKSB7CiAgICAgICAgdXBkYXRlX29wdGlvbignc2hvd19yb2xlX2luX2FjY291bnQnLCBhcnJheSgpKTsKICAgIH0KfQpyZWdpc3Rlcl9hY3RpdmF0aW9uX2hvb2soX19GSUxFX18sICd2aXBfd29vX2Rpc2NvdW50X2FjdGl2YXRlJyk7CgovLyDOo861zrvOr860zrEgzqHPhc64zrzOr8+DzrXPic69CmZ1bmN0aW9uIHZpcF93b29fZGlzY291bnRfb3B0aW9uc19wYWdlKCkgewogICAgaWYgKGlzc2V0KCRfR0VUWydyb2xlX2Fzc2lnbmVkJ10pKSB7CiAgICAgICAgaWYgKCRfR0VUWydyb2xlX2Fzc2lnbmVkJ10gPT09ICdzdWNjZXNzJykgewogICAgICAgICAgICBlY2hvICc8ZGl2IGNsYXNzPSJub3RpY2Ugbm90aWNlLXN1Y2Nlc3MgaXMtZGlzbWlzc2libGUiPjxwPs6fIM+Bz4zOu86/z4IgzrHOvc+EzrnPg8+Ezr/Ouc+Hzq/Pg8+EzrfOus61IM61z4DOuc+Ez4XPh8+Oz4Igz4PPhM6/zr0gz4fPgc6uz4PPhM63ITwvcD48L2Rpdj4nOwogICAgICAgIH0gZWxzZWlmICgkX0dFVFsncm9sZV9hc3NpZ25lZCddID09PSAnZXJyb3InKSB7CiAgICAgICAgICAgIGVjaG8gJzxkaXYgY2xhc3M9Im5vdGljZSBub3RpY2UtZXJyb3IgaXMtZGlzbWlzc2libGUiPjxwPs6jz4bOrM67zrzOsTogzpTOtc69IM6uz4TOsc69IM60z4XOvc6xz4TOriDOtyDOsc69z4TOuc+Dz4TOv86vz4fOuc+Dzrcgz4TOv8+FIM+Bz4zOu86/z4Ugz4PPhM6/zr0gz4fPgc6uz4PPhM63LjwvcD48L2Rpdj4nOwogICAgICAgIH0KICAgIH0KCiAgICBpZiAoaXNzZXQoJF9HRVRbJ3JvbGVfcmVtb3ZlZCddKSAmJiAkX0dFVFsncm9sZV9yZW1vdmVkJ10gPT09ICdzdWNjZXNzJykgewogICAgICAgIGVjaG8gJzxkaXYgY2xhc3M9Im5vdGljZSBub3RpY2Utc3VjY2VzcyBpcy1kaXNtaXNzaWJsZSI+PHA+zp/OuSDPgc+MzrvOv865IM6xz4bOsc65z4HOrc64zrfOus6xzr0gzrXPgM65z4TPhc+Hz47PgiE8L3A+PC9kaXY+JzsKICAgIH0KICAgID8+CiAgICA8ZGl2IGNsYXNzPSJ3cmFwIiBzdHlsZT0ibWF4LXdpZHRoOiA4MCU7IG1hcmdpbjogMCBhdXRvOyBmb250LWZhbWlseTogJ0FyaWFsJywgc2Fucy1zZXJpZjsiPgogICAgICAgIDxoMiBzdHlsZT0iZm9udC1zaXplOiAyOHB4OyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLWJvdHRvbTogMzBweDsgY29sb3I6ICMzMzM7Ij5WSVAgV29vIERpc2NvdW50IM6hz4XOuM68zq/Pg861zrnPgjwvaDI+CiAgICAgICAgICAgICAgICA8cCBzdHlsZT0iZm9udC1zaXplOiAxNnB4OyBjb2xvcjogIzU1NTsgbWFyZ2luLWJvdHRvbTogMzBweDsiPgogICAgICAgICAgICDOoM+Bzr/Pg864zq3Pg8+EzrUgzq3Ous+Az4TPic+DzrcgzrLOrM+DzrXOuSDPgc+MzrvOv8+FIM+Hz4HOrs+Dz4TOtyDPg8+EzrEgz4DPgc6/z4rPjM69z4TOsSDPhM6/z4UgV29vQ29tbWVyY2UuIM6cz4DOv8+BzrXOr8+EzrUgzrXPgM6vz4POt8+CIM69zrEgz4DPgc6/z4POuM6tz4POtc+EzrUgzq4gzr3OsSDOtM65zrHOs8+BzqzPiM61z4TOtSDPgc+MzrvOv8+Fz4Igzq4gzrHOus+MzrzOsSDOus6xzrkgzr3OsSDOsc+Azr/Ous+Bz43PiM61z4TOtSDPhM6/IM6mzqDOkSDOsc+Az4wgz4PPhc6zzrrOtc66z4HOuc68zq3Ovc6/z4XPgiDPgc+MzrvOv8+Fz4IuIChNYWRlIHdpdGgg4p2kIGJ5IFBpbGFzLkdyKQogICAgICAgIDwvcD4KCjxmb3JtIG1ldGhvZD0icG9zdCIgYWN0aW9uPSJvcHRpb25zLnBocCIgc3R5bGU9ImJhY2tncm91bmQ6ICNmOWY5Zjk7IGJvcmRlci1yYWRpdXM6IDhweDsgcGFkZGluZzogMzBweDsgYm94LXNoYWRvdzogMCAwIDE1cHggcmdiYSgwLDAsMCwwLjEpOyI+CiAgICA8P3BocAogICAgc2V0dGluZ3NfZmllbGRzKCd2aXBfd29vX2Rpc2NvdW50X29wdGlvbnMnKTsKICAgIGRvX3NldHRpbmdzX3NlY3Rpb25zKCd2aXAtd29vLWRpc2NvdW50LW1haW4nKTsKICAgID8+CiAgICA8YnV0dG9uIHR5cGU9InN1Ym1pdCIgaWQ9InNhdmVfc2V0dGluZ3NfYnV0dG9uIiBjbGFzcz0iYnV0dG9uIGJ1dHRvbi1wcmltYXJ5IiBzdHlsZT0iZm9udC1zaXplOiAxNnB4OyBwYWRkaW5nOiAxMnB4IDIwcHg7IGJhY2tncm91bmQtY29sb3I6ICM0Q0FGNTA7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogNnB4OyBjdXJzb3I6IHBvaW50ZXI7IHdpZHRoOiAxMDAlOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij4KICAgICAgICDOkc+Azr/OuM6uzrrOtc+Fz4POtyDOoc+FzrjOvM6vz4POtc+Jzr0KICAgIDwvYnV0dG9uPgo8L2Zvcm0+Cgo8c2NyaXB0PgogICAgLy8gzqfOtc65z4HOuc+Dz4TOrs+CIM6zzrnOsSDPhM6/IM+AzqzPhM63zrzOsSDPhM6/z4UgzrrOv8+FzrzPgM65zr/PjSAizpHPgM6/zrjOrs66zrXPhc+DzrcgzqHPhc64zrzOr8+DzrXPic69IgogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NhdmVfc2V0dGluZ3NfYnV0dG9uJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbihldmVudCkgewogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7IC8vIM6Rz4DOv8+Ez4HOv8+Azq4gz4TOt8+CIM66zrHOvc6/zr3Ouc66zq7PgiDPhc+Azr/Oss6/zrvOrs+CIM+EzrfPgiDPhs+Mz4HOvM6xz4IgKM6xzr3Osc69zrXPjs+DzrXOuc+CIM+EzrfPgiDPg861zrvOr860zrHPgikKCiAgICAgICAgdmFyIGJ1dHRvbiA9IHRoaXM7CiAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ86fzrkgz4HPhc64zrzOr8+DzrXOuc+CIM6xz4DOv864zrfOus61z43Ov869z4TOsc65Li4uJzsgLy8gzpHOu867zrHOs86uIM66zrXOuc68zq3Ovc6/z4Ugz4TOv8+FIM66zr/Phc68z4DOuc6/z40KICAgICAgICBidXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyNlODIwNjQnOyAvLyDOkc67zrvOsc6zzq4gz4fPgc+OzrzOsc+Ezr/PgiDPhM6/z4UgzrrOv8+FzrzPgM65zr/PjSDPg861ICNlODIwNjQKCiAgICAgICAgLy8gzqXPgM6/zrLOv867zq4gz4TOt8+CIM+Gz4zPgc68zrHPgiDOvM6tz4PPiSBKYXZhU2NyaXB0IM6zzrnOsSDOvc6xIM68zrfOvSDOs86vzr3Otc65IM6xzr3Osc69zq3Pic+Dzrcgz4TOt8+CIM+DzrXOu86vzrTOsc+CCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgYnV0dG9uLmZvcm0uc3VibWl0KCk7IC8vIM6lz4DOv86yzr/Ou86uIM+EzrfPgiDPhs+Mz4HOvM6xz4IgzrzOtc+EzqwgzrHPgM+MIDIgzrTOtc+Fz4TOtc+Bz4zOu861z4DPhM6xCiAgICAgICAgfSwgMTAwMCk7IC8vIDEwMDAgbXMgPSAxIM60zrXPhc+EzrXPgc+MzrvOtc+Az4TOvwoKICAgICAgICAvLyDOlc+AzrHOvc6xz4bOv8+Bzqwgz4TOv8+FIM66zrXOuc68zq3Ovc6/z4UgzrrOsc65IM+Hz4HPjs68zrHPhM6/z4Igz4TOv8+FIM66zr/Phc68z4DOuc6/z40gzrzOtc+EzqwgzrHPgM+MIDIgzrTOtc+Fz4TOtc+Bz4zOu861z4DPhM6xCiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHsKICAgICAgICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gJ86Rz4DOv864zq7Ous61z4XPg863IM6hz4XOuM68zq/Pg861z4nOvSc7IC8vIM6Vz4DOsc69zrHPhs6/z4HOrCDPhM6/z4UgzrHPgc+HzrnOus6/z40gzrrOtc65zrzOrc69zr/PhQogICAgICAgICAgICBidXR0b24uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyM0Q0FGNTAnOyAvLyDOlc+AzrHOvc6xz4bOv8+Bzqwgz4TOv8+FIM6xz4HPh865zrrOv8+NIM+Hz4HPjs68zrHPhM6/z4IKICAgICAgICB9LCAyMDAwKTsgLy8gMjAwMCBtcyA9IDIgzrTOtc+Fz4TOtc+Bz4zOu861z4DPhM6xCiAgICB9KTsKPC9zY3JpcHQ+CgoKPGRpdiBzdHlsZT0ibWFyZ2luLXRvcDogNTBweDsgYm9yZGVyLXRvcDogMXB4IHNvbGlkICNkZGQ7IHBhZGRpbmctdG9wOiAyMHB4OyI+CiAgICA8aDMgc3R5bGU9ImZvbnQtc2l6ZTogMjJweDsgY29sb3I6ICMzMzM7IG1hcmdpbi1ib3R0b206IDMwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPs6UzrfOvM65zr/Phc+BzrPOr86xIM66zrHOuSDOtM65zrHOs8+BzrHPhs6uIM+Bz4zOu86/z4U8L2gzPgogICAgPGRpdiBzdHlsZT0iZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOyBnYXA6IDMwcHg7Ij4KCiAgICAgICAgPCEtLSDOoM+Bzr/Pg864zq7Ous63IM6dzq3Ov8+FIM6hz4zOu86/z4UgLS0+CiAgICAgICAgPGRpdiBzdHlsZT0iZmxleDogMTsgcGFkZGluZzogMzBweDsgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDsgYm9yZGVyLXJhZGl1czogOHB4OyBib3gtc2hhZG93OiAwIDRweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOyI+CiAgICAgICAgICAgIDxoNCBzdHlsZT0iZm9udC1zaXplOiAxOHB4OyBjb2xvcjogIzMzMzsgZm9udC13ZWlnaHQ6IDYwMDsgbWFyZ2luLWJvdHRvbTogMjBweDsgdGV4dC1hbGlnbjogY2VudGVyOyI+zqDPgc6/z4POuM6uzrrOtyDOvc6tzr/PhSDPgc+MzrvOv8+FPC9oND4KICAgICAgICAgICAgPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249IiIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGdhcDogMjBweDsiPgogICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0ibmV3X3JvbGVfdGl0bGUiIHN0eWxlPSJmb250LXNpemU6IDE2cHg7IGNvbG9yOiAjNTU1OyI+zqTOr8+EzrvOv8+CIM69zq3Ov8+FIM+Bz4zOu86/z4U6PC9sYWJlbD4KICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJuZXdfcm9sZV90aXRsZSIgaWQ9Im5ld19yb2xlX3RpdGxlIiByZXF1aXJlZCBzdHlsZT0icGFkZGluZzogMTJweDsgZm9udC1zaXplOiAxNHB4OyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOiA2cHg7IHdpZHRoOiAxMDAlOyB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4zcyBlYXNlLWluLW91dDsiIG9uZm9jdXM9InRoaXMuc3R5bGUuYm9yZGVyQ29sb3I9JyM0Q0FGNTAnOyIgb25ibHVyPSJ0aGlzLnN0eWxlLmJvcmRlckNvbG9yPScjY2NjJzsiLz4KCiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJhZGRfbmV3X3JvbGUiIHZhbHVlPSLOlM63zrzOuc6/z4XPgc6zzq/OsSDPgc+MzrvOv8+FIiBjbGFzcz0iYnV0dG9uIGJ1dHRvbi1wcmltYXJ5IiBzdHlsZT0iZm9udC1zaXplOiAxNnB4OyBwYWRkaW5nOiAxMnB4IDIwcHg7IGJhY2tncm91bmQtY29sb3I6ICM0Q0FGNTA7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogNnB4OyBjdXJzb3I6IHBvaW50ZXI7IHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zcyBlYXNlLWluLW91dDsiIG9ubW91c2VvdmVyPSJ0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvcj0nIzQ1YTA0OSc7IiBvbm1vdXNlb3V0PSJ0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvcj0nIzRDQUY1MCc7Ii8+CiAgICAgICAgICAgIDwvZm9ybT4KICAgICAgICA8L2Rpdj4KCiAgICAgICAgPCEtLSDOlM65zrHOs8+BzrHPhs6uIM6hz4zOu86/z4UgLS0+CiAgICAgICAgPGRpdiBzdHlsZT0iZmxleDogMTsgcGFkZGluZzogMzBweDsgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDsgYm9yZGVyLXJhZGl1czogOHB4OyBib3gtc2hhZG93OiAwIDRweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOyI+CiAgICAgICAgICAgIDxoNCBzdHlsZT0iZm9udC1zaXplOiAxOHB4OyBjb2xvcjogIzMzMzsgZm9udC13ZWlnaHQ6IDYwMDsgbWFyZ2luLWJvdHRvbTogMjBweDsgdGV4dC1hbGlnbjogY2VudGVyOyI+zpTOuc6xzrPPgc6xz4bOriDPgc+MzrvOv8+FPC9oND4KICAgICAgICAgICAgPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249IiIgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47IGdhcDogMjBweDsiPgogICAgICAgICAgICAgICAgPGxhYmVsIGZvcj0iZGVsZXRlX3JvbGUiIHN0eWxlPSJmb250LXNpemU6IDE2cHg7IGNvbG9yOiAjNTU1OyI+zpXPgM65zrvOrc6+z4TOtSDPgc+MzrvOvzo8L2xhYmVsPgogICAgICAgICAgICAgICAgPHNlbGVjdCBuYW1lPSJkZWxldGVfcm9sZSIgaWQ9ImRlbGV0ZV9yb2xlIiByZXF1aXJlZCBzdHlsZT0icGFkZGluZzogMTJweDsgZm9udC1zaXplOiAxNHB4OyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOiA2cHg7IHdpZHRoOiAxMDAlOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4zcyBlYXNlLWluLW91dDsiIG9uZm9jdXM9InRoaXMuc3R5bGUuYm9yZGVyQ29sb3I9JyNGRjZGNjEnOyIgb25ibHVyPSJ0aGlzLnN0eWxlLmJvcmRlckNvbG9yPScjY2NjJzsiPgogICAgICAgICAgICAgICAgICAgIDw/cGhwCiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsICR3cF9yb2xlczsKICAgICAgICAgICAgICAgICAgICAkZXhjbHVkZWRfcm9sZXMgPSBhcnJheSgKICAgICAgICAgICAgICAgICAgICAgICAgJ2FkbWluaXN0cmF0b3InLAogICAgICAgICAgICAgICAgICAgICAgICAnc2hvcF9tYW5hZ2VyJywKICAgICAgICAgICAgICAgICAgICAgICAgJ2NvbnRyaWJ1dG9yJywKICAgICAgICAgICAgICAgICAgICAgICAgJ3N1YnNjcmliZXInLAogICAgICAgICAgICAgICAgICAgICAgICAnY3VzdG9tZXInLAogICAgICAgICAgICAgICAgICAgICAgICAnd3BzZW9fbWFuYWdlcicsCiAgICAgICAgICAgICAgICAgICAgICAgICd3cHNlb19lZGl0b3InLAogICAgICAgICAgICAgICAgICAgICAgICAnZWRpdG9yJywKICAgICAgICAgICAgICAgICAgICAgICAgJ2F1dGhvcicKICAgICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKCR3cF9yb2xlcy0+Z2V0X25hbWVzKCkgYXMgJHJvbGUgPT4gJG5hbWUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbl9hcnJheSgkcm9sZSwgJGV4Y2x1ZGVkX3JvbGVzKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWNobyAiPG9wdGlvbiB2YWx1ZT0nIiAuIGVzY19hdHRyKCRyb2xlKSAuICInPiIgLiBlc2NfaHRtbCgkbmFtZSkgLiAiPC9vcHRpb24+IjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICA/PgogICAgICAgICAgICAgICAgPC9zZWxlY3Q+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0ic3VibWl0IiBuYW1lPSJyZW1vdmVfcm9sZSIgdmFsdWU9Is6UzrnOsc6zz4HOsc+Gzq4gz4HPjM67zr/PhSIgY2xhc3M9ImJ1dHRvbiBidXR0b24tc2Vjb25kYXJ5IiBzdHlsZT0iZm9udC1zaXplOiAxNnB4OyBwYWRkaW5nOiAxMnB4IDIwcHg7IGJhY2tncm91bmQtY29sb3I6ICNGRjZGNjE7IGNvbG9yOiB3aGl0ZTsgYm9yZGVyLXJhZGl1czogNnB4OyBjdXJzb3I6IHBvaW50ZXI7IHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zcyBlYXNlLWluLW91dDsiIG9ubW91c2VvdmVyPSJ0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvcj0nI2U2NWM1Nic7IiBvbm1vdXNlb3V0PSJ0aGlzLnN0eWxlLmJhY2tncm91bmRDb2xvcj0nI0ZGNkY2MSc7Ii8+CiAgICAgICAgICAgIDwvZm9ybT4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2Pgo8L2Rpdj4KCjwhLS0gzpHOvc+EzrnPg8+Ezr/Or8+HzrnPg863IM6hz4zOu86/z4UgLS0+CjxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDUwcHg7IHBhZGRpbmc6IDMwcHg7IGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7IGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTsgbWF4LXdpZHRoOiA4MCU7IG1hcmdpbi1sZWZ0OiBhdXRvOyBtYXJnaW4tcmlnaHQ6IGF1dG87Ij4KICAgIDxoMyBzdHlsZT0iZm9udC1zaXplOiAyMnB4OyBjb2xvcjogIzMzMzsgbWFyZ2luLWJvdHRvbTogMzBweDsgdGV4dC1hbGlnbjogY2VudGVyOyI+zpHOvc+EzrnPg8+Ezr/Or8+HzrnPg863IM6hz4zOu86/z4U8L2gzPgogICAgPGZvcm0gbWV0aG9kPSJwb3N0IiBhY3Rpb249Ijw/cGhwIGVjaG8gYWRtaW5fdXJsKCdhZG1pbi1wb3N0LnBocD9hY3Rpb249YXNzaWduX3JvbGUnKTsgPz4iIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBnYXA6IDIwcHg7Ij4KICAgICAgICA8IS0tIM6Vz4DOuc67zr/Os86uIM6nz4HOrs+Dz4TOtyAtLT4KICAgICAgICA8bGFiZWwgZm9yPSJ1c2VyX3NlbGVjdCIgc3R5bGU9ImZvbnQtc2l6ZTogMTZweDsgY29sb3I6ICM1NTU7Ij7Olc+AzrnOu86tzr7PhM61IM+Hz4HOrs+Dz4TOtzo8L2xhYmVsPgogICAgICAgIDxzZWxlY3QgbmFtZT0idXNlcl9zZWxlY3QiIGlkPSJ1c2VyX3NlbGVjdCIgcmVxdWlyZWQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGZvbnQtc2l6ZTogMTRweDsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgYm9yZGVyLXJhZGl1czogNnB4OyB3aWR0aDogMTAwJTsgYm94LXNpemluZzogYm9yZGVyLWJveDsiPgogICAgICAgICAgICA8P3BocAokdXNlcnMgPSBnZXRfdXNlcnMoKTsKZm9yZWFjaCAoJHVzZXJzIGFzICR1c2VyKSB7CiAgICAvLyDOlc6+zrHOr8+BzrXPg863IM+Hz4HOt8+Dz4TPjs69IM68zrUgz4HPjM67zr8gImFkbWluaXN0cmF0b3IiIM6uICJzaG9wX21hbmFnZXIiCiAgICAkcm9sZXNfdG9fZXhjbHVkZSA9IFsnYWRtaW5pc3RyYXRvcicsICdzaG9wX21hbmFnZXInXTsKICAgICR1c2VyX3JvbGVzID0gJHVzZXItPnJvbGVzOwoKICAgIC8vIM6VzrvOrc6zz4fOv8+FzrzOtSDOsc69IM6/zrkgz4HPjM67zr/OuSDPhM6/z4Ugz4fPgc6uz4PPhM63IM+AzrXPgc65zq3Ph86/z4XOvSDOus6sz4DOv865zr/OvSDOsc+Az4wgz4TOv8+Fz4IgzrXOvs6xzrnPgc6/z43OvM61zr3Ov8+Fz4Igz4HPjM67zr/Phc+CCiAgICBpZiAoYXJyYXlfaW50ZXJzZWN0KCRyb2xlc190b19leGNsdWRlLCAkdXNlcl9yb2xlcykpIHsKICAgICAgICBjb250aW51ZTsgLy8gzqDOsc+BzrHOu861zq/PgM6/z4XOvM61IM6xz4XPhM6/z43PgiDPhM6/z4XPgiDPh8+Bzq7Pg8+EzrXPggogICAgfQoKICAgIGVjaG8gIjxvcHRpb24gdmFsdWU9JyIgLiBlc2NfYXR0cigkdXNlci0+SUQpIC4gIic+IiAuIGVzY19odG1sKCR1c2VyLT5kaXNwbGF5X25hbWUgLiAiICgiIC4gJHVzZXItPnVzZXJfZW1haWwgLiAiKSIpIC4gIjwvb3B0aW9uPiI7Cn0KPz4KCiAgICAgICAgPC9zZWxlY3Q+CgogICAgICAgIDwhLS0gzpXPgM65zrvOv86zzq4gzqHPjM67zr/PhSAtLT4KICAgICAgICA8bGFiZWwgZm9yPSJyb2xlX3NlbGVjdCIgc3R5bGU9ImZvbnQtc2l6ZTogMTZweDsgY29sb3I6ICM1NTU7Ij7Olc+AzrnOu86tzr7PhM61IM+Bz4zOu86/OjwvbGFiZWw+CiAgICAgICAgPHNlbGVjdCBuYW1lPSJyb2xlX3NlbGVjdCIgaWQ9InJvbGVfc2VsZWN0IiByZXF1aXJlZCBzdHlsZT0icGFkZGluZzogMTJweDsgZm9udC1zaXplOiAxNHB4OyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOiA2cHg7IHdpZHRoOiAxMDAlOyBib3gtc2l6aW5nOiBib3JkZXItYm94OyI+CiAgICAgICAgICAgIDw/cGhwCiAgICAgICAgICAgIGdsb2JhbCAkd3Bfcm9sZXM7CiAgICAgICAgICAgICRleGNsdWRlZF9yb2xlcyA9IGFycmF5KAogICAgICAgICAgICAgICAgJ2FkbWluaXN0cmF0b3InLAogICAgICAgICAgICAgICAgJ3Nob3BfbWFuYWdlcicsCiAgICAgICAgICAgICAgICAnY29udHJpYnV0b3InLAogICAgICAgICAgICAgICAgJ3N1YnNjcmliZXInLAogICAgICAgICAgICAgICAgJ2N1c3RvbWVyJywKICAgICAgICAgICAgICAgICd3cHNlb19tYW5hZ2VyJywKICAgICAgICAgICAgICAgICd3cHNlb19lZGl0b3InLAogICAgICAgICAgICAgICAgJ2VkaXRvcicsCiAgICAgICAgICAgICAgICAnYXV0aG9yJwogICAgICAgICAgICApOwogICAgICAgICAgICBmb3JlYWNoICgkd3Bfcm9sZXMtPmdldF9uYW1lcygpIGFzICRyb2xlID0+ICRuYW1lKSB7CiAgICAgICAgICAgICAgICBpZiAoIWluX2FycmF5KCRyb2xlLCAkZXhjbHVkZWRfcm9sZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgZWNobyAiPG9wdGlvbiB2YWx1ZT0nIiAuIGVzY19hdHRyKCRyb2xlKSAuICInPiIgLiBlc2NfaHRtbCgkbmFtZSkgLiAiPC9vcHRpb24+IjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICA/PgogICAgICAgIDwvc2VsZWN0PgoKICAgICAgICA8IS0tIM6lz4DOv86yzr/Ou86uIC0tPgogICAgICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgZ2FwOiAxMHB4OyI+CiAgICAgICAgICAgIDxidXR0b24gdHlwZT0ic3VibWl0IiBuYW1lPSJhc3NpZ25fcm9sZSIgY2xhc3M9ImJ1dHRvbiBidXR0b24tcHJpbWFyeSIgc3R5bGU9ImZvbnQtc2l6ZTogMTZweDsgcGFkZGluZzogMTJweCAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjNENBRjUwOyBjb2xvcjogd2hpdGU7IGJvcmRlci1yYWRpdXM6IDZweDsgY3Vyc29yOiBwb2ludGVyOyI+zpHOvc+EzrnPg8+Ezr/Or8+HzrnPg863IM6hz4zOu86/z4U8L2J1dHRvbj4KICAgICAgICAgICAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiIG5hbWU9InJlbW92ZV9yb2xlIiBjbGFzcz0iYnV0dG9uIGJ1dHRvbi1zZWNvbmRhcnkiIHN0eWxlPSJmb250LXNpemU6IDE2cHg7IHBhZGRpbmc6IDEycHggMjBweDsgYmFja2dyb3VuZC1jb2xvcjogI0ZGNkY2MTsgY29sb3I6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA2cHg7IGN1cnNvcjogcG9pbnRlcjsiPs6Rz4bOsc6vz4HOtc+Dzrcgz4HPjM67z4nOvSDPh8+Bzq7Pg8+Ezrc8L2J1dHRvbj4KICAgICAgICA8L2Rpdj4KICAgIDwvZm9ybT4KPC9kaXY+CgoKCgoKICAgIDw/cGhwCn0KCi8vIM6hz4XOuM68zq/Pg861zrnPgiDOus6xzrkgz4DOtc60zq/OsQpmdW5jdGlvbiB2aXBfd29vX2Rpc2NvdW50X3NldHRpbmdzKCkgewogICAgcmVnaXN0ZXJfc2V0dGluZygndmlwX3dvb19kaXNjb3VudF9vcHRpb25zJywgJ2IyYl9kaXNjb3VudHMnKTsKICAgIHJlZ2lzdGVyX3NldHRpbmcoJ3ZpcF93b29fZGlzY291bnRfb3B0aW9ucycsICdleGNsdWRlX3ZhdF9yb2xlcycpOwogICAgcmVnaXN0ZXJfc2V0dGluZygndmlwX3dvb19kaXNjb3VudF9vcHRpb25zJywgJ3Nob3dfcm9sZV9pbl9hY2NvdW50Jyk7CiAgICByZWdpc3Rlcl9zZXR0aW5nKCd2aXBfd29vX2Rpc2NvdW50X29wdGlvbnMnLCAnZW5hYmxlX3ZhdF9tZXNzYWdlJyk7IC8vIM6dzq3OsSDPgc+NzrjOvM65z4POtyDOs865zrEgz4TOvyDOvM6uzr3Phc68zrEgzqbOoM6RCgogICAgYWRkX3NldHRpbmdzX3NlY3Rpb24oJ3ZpcF93b29fZGlzY291bnQtbWFpbicsICfOoc+FzrjOvM6vz4POtc65z4IgzpXOus+Az4TPjs+DzrXPic69IM66zrHOuSDOps6gzpEnLCBudWxsLCAndmlwLXdvby1kaXNjb3VudC1tYWluJyk7CgogICAgYWRkX3NldHRpbmdzX2ZpZWxkKAogICAgICAgICdiMmJfZGlzY291bnRzJywKICAgICAgICAnzqHPhc64zrzOr8+DzrXOuc+CJywKICAgICAgICAnYjJiX2Rpc2NvdW50c19jYWxsYmFjaycsCiAgICAgICAgJ3ZpcC13b28tZGlzY291bnQtbWFpbicsCiAgICAgICAgJ3ZpcF93b29fZGlzY291bnQtbWFpbicKICAgICk7CgogICAgYWRkX3NldHRpbmdzX2ZpZWxkKAogICAgICAgICdlbmFibGVfdmF0X21lc3NhZ2UnLCAvLyDOnc6tzr8gz4DOtc60zq/OvyDOs865zrEgz4TOvyDOvM6uzr3Phc68zrEgzqbOoM6RCiAgICAgICAgJ86VzrzPhs6szr3Ouc+DzrcgIs6nz4nPgc6vz4IgzqbOoM6RIicsCiAgICAgICAgJ2VuYWJsZV92YXRfbWVzc2FnZV9jYWxsYmFjaycsCiAgICAgICAgJ3ZpcC13b28tZGlzY291bnQtbWFpbicsCiAgICAgICAgJ3ZpcF93b29fZGlzY291bnQtbWFpbicKICAgICk7Cn0KCi8vIENhbGxiYWNrIM6zzrnOsSDPhM6/IGNoZWNrYm94ICLOlc68z4bOrM69zrnPg863IM6czrfOvc+NzrzOsc+Ezr/PgiDOps6gzpEgz4PPhM65z4IgzqTOuc68zq3PgiIKZnVuY3Rpb24gZW5hYmxlX3ZhdF9tZXNzYWdlX2NhbGxiYWNrKCkgewogICAgJHZhbHVlID0gZ2V0X29wdGlvbignZW5hYmxlX3ZhdF9tZXNzYWdlJywgZmFsc2UpOwogICAgZWNobyAnPGlucHV0IHR5cGU9ImNoZWNrYm94IiBuYW1lPSJlbmFibGVfdmF0X21lc3NhZ2UiIHZhbHVlPSIxIiAnIC4gY2hlY2tlZCgxLCAkdmFsdWUsIGZhbHNlKSAuICcgc3R5bGU9IndpZHRoOiAyMHB4OyBoZWlnaHQ6IDIwcHg7Ii8+JzsKICAgIGVjaG8gJzxsYWJlbCBmb3I9ImVuYWJsZV92YXRfbWVzc2FnZSIgc3R5bGU9ImZvbnQtc2l6ZTogMTZweDsgbWFyZ2luLWxlZnQ6IDEwcHg7IGNvbG9yOiAjMzMzOyI+zpXOvM+GzqzOvc65z4POtyDOvM63zr3Pjc68zrHPhM6/z4Igz4DPic+CIM6/zrkgz4TOuc68zq3PgiDOtM61zr0gz4DOtc+BzrnOu86xzrzOss6szr3Ov8+Fzr0gzqbOoM6RPC9sYWJlbD4nOwp9CgphZGRfYWN0aW9uKCdhZG1pbl9pbml0JywgJ3ZpcF93b29fZGlzY291bnRfc2V0dGluZ3MnKTsKCgoKCi8vIENhbGxiYWNrIM6zzrnOsSDOoc+FzrjOvM6vz4POtc65z4IgzqHPjM67z4nOvQpmdW5jdGlvbiBiMmJfZGlzY291bnRzX2NhbGxiYWNrKCkgewogICAgZ2xvYmFsICR3cF9yb2xlczsKICAgICRyb2xlcyA9ICR3cF9yb2xlcy0+Z2V0X25hbWVzKCk7CiAgICAkZGlzY291bnRzID0gZ2V0X29wdGlvbignYjJiX2Rpc2NvdW50cycsIGFycmF5KCkpOwogICAgJGV4Y2x1ZGVfdmF0X3JvbGVzID0gZ2V0X29wdGlvbignZXhjbHVkZV92YXRfcm9sZXMnLCBhcnJheSgpKTsKICAgICRzaG93X3JvbGVfaW5fYWNjb3VudCA9IGdldF9vcHRpb24oJ3Nob3dfcm9sZV9pbl9hY2NvdW50JywgYXJyYXkoKSk7CgogICAgLy8gzqfPgc63z4POuc68zr/PgM6/zrnOv8+NzrzOtSDPhM6/IDEwMCUgz4DOu86sz4TOv8+CIM6zzrnOsSDPhM6/zr0gz4DOr869zrHOus6xIM66zrHOuSDOsc+GzrHOuc+Bzr/Pjc68zrUgz4TOt869IM+Az4HPjs+Ezrcgz4PPhM6uzrvOtwogICAgZWNobyAnPHRhYmxlIGNsYXNzPSJmb3JtLXRhYmxlIiBzdHlsZT0id2lkdGg6IDEwMCU7IGJvcmRlci1jb2xsYXBzZTogY29sbGFwc2U7Ij4nOwogICAgZWNobyAnPHRoZWFkPjx0ciBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogI2YyZjJmMjsgY29sb3I6ICMzMzM7IGZvbnQtd2VpZ2h0OiBib2xkOyB0ZXh0LWFsaWduOiBsZWZ0OyBwYWRkaW5nOiAxMHB4OyI+JzsKICAgIGVjaG8gJzx0aD7Ooc+MzrvOv8+CPC90aD4nOwogICAgZWNobyAnPHRoPs6IzrrPgM+Ez4nPg863ICglKTwvdGg+JzsKICAgIGVjaG8gJzx0aD7OpM65zrzOrc+CIM+Hz4nPgc6vz4IgzqbOoM6RPC90aD4nOwogICAgZWNobyAnPHRoPs6VzrzPhs6szr3Ouc+Dzrcgz4PPhM6/IE15IEFjY291bnQ8L3RoPic7CiAgICBlY2hvICc8L3RyPjwvdGhlYWQ+JzsKICAgIGVjaG8gJzx0Ym9keT4nOwoKICAgIGZvcmVhY2ggKCRyb2xlcyBhcyAkcm9sZV92YWx1ZSA9PiAkcm9sZV9uYW1lKSB7CiAgICAgICAgJGRpc2NvdW50ID0gaXNzZXQoJGRpc2NvdW50c1skcm9sZV92YWx1ZV0pID8gJGRpc2NvdW50c1skcm9sZV92YWx1ZV0gOiAnMCc7CiAgICAgICAgJGV4Y2x1ZGVfdmF0ID0gaXNzZXQoJGV4Y2x1ZGVfdmF0X3JvbGVzWyRyb2xlX3ZhbHVlXSkgPyAkZXhjbHVkZV92YXRfcm9sZXNbJHJvbGVfdmFsdWVdIDogZmFsc2U7CiAgICAgICAgJHNob3dfaW5fYWNjb3VudCA9IGlzc2V0KCRzaG93X3JvbGVfaW5fYWNjb3VudFskcm9sZV92YWx1ZV0pID8gJHNob3dfcm9sZV9pbl9hY2NvdW50WyRyb2xlX3ZhbHVlXSA6IGZhbHNlOwoKICAgICAgICBlY2hvICI8dHIgc3R5bGU9J2JvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGRkOyBwYWRkaW5nOiAxMHB4Oyc+IjsKICAgICAgICBlY2hvICI8dGQgc3R5bGU9J3BhZGRpbmc6IDhweDsnPiIgLiBlc2NfaHRtbCgkcm9sZV9uYW1lKSAuICI8L3RkPiI7CiAgICAgICAgZWNobyAiPHRkPjxpbnB1dCB0eXBlPSd0ZXh0JyBuYW1lPSdiMmJfZGlzY291bnRzWyIgLiBlc2NfYXR0cigkcm9sZV92YWx1ZSkgLiAiXScgdmFsdWU9JyIgLiBlc2NfYXR0cigkZGlzY291bnQpIC4gIicgc3R5bGU9J3dpZHRoOiAxMDBweDsgcGFkZGluZzogNXB4OyBib3JkZXItcmFkaXVzOiA1cHg7Jy8+PC90ZD4iOwogICAgICAgIGVjaG8gIjx0ZD48aW5wdXQgdHlwZT0nY2hlY2tib3gnIG5hbWU9J2V4Y2x1ZGVfdmF0X3JvbGVzWyIgLiBlc2NfYXR0cigkcm9sZV92YWx1ZSkgLiAiXScgdmFsdWU9JzEnIiAuIGNoZWNrZWQoJGV4Y2x1ZGVfdmF0LCB0cnVlLCBmYWxzZSkgLiAiIHN0eWxlPSd3aWR0aDogMjBweDsgaGVpZ2h0OiAyMHB4OycvPjwvdGQ+IjsKICAgICAgICBlY2hvICI8dGQ+PGlucHV0IHR5cGU9J2NoZWNrYm94JyBuYW1lPSdzaG93X3JvbGVfaW5fYWNjb3VudFsiIC4gZXNjX2F0dHIoJHJvbGVfdmFsdWUpIC4gIl0nIHZhbHVlPScxJyIgLiBjaGVja2VkKCRzaG93X2luX2FjY291bnQsIHRydWUsIGZhbHNlKSAuICIgc3R5bGU9J3dpZHRoOiAyMHB4OyBoZWlnaHQ6IDIwcHg7Jy8+PC90ZD4iOwogICAgICAgIGVjaG8gIjwvdHI+IjsKICAgIH0KCiAgICBlY2hvICc8L3Rib2R5PjwvdGFibGU+JzsKfQoKCgovLyDOoM+Bzr/Pg864zq7Ous63IM6hz4zOu86/z4UKaWYgKGlzc2V0KCRfUE9TVFsnYWRkX25ld19yb2xlJ10pICYmICFlbXB0eSgkX1BPU1RbJ25ld19yb2xlX3RpdGxlJ10pKSB7CiAgICAkbmV3X3JvbGVfdGl0bGUgPSBzYW5pdGl6ZV90ZXh0X2ZpZWxkKCRfUE9TVFsnbmV3X3JvbGVfdGl0bGUnXSk7CgogICAgaWYgKCFnZXRfcm9sZSgkbmV3X3JvbGVfdGl0bGUpKSB7CiAgICAgICAgYWRkX3JvbGUoJG5ld19yb2xlX3RpdGxlLCB1Y3dvcmRzKHN0cl9yZXBsYWNlKCdfJywgJyAnLCAkbmV3X3JvbGVfdGl0bGUpKSwgYXJyYXkoJ3JlYWQnID0+IHRydWUpKTsKCiAgICAgICAgYWRkX2FjdGlvbignYWRtaW5fbm90aWNlcycsIGZ1bmN0aW9uICgpIHVzZSAoJG5ld19yb2xlX3RpdGxlKSB7CiAgICAgICAgICAgIGVjaG8gJzxkaXYgY2xhc3M9InVwZGF0ZWQiPjxwPs6fIM+Bz4zOu86/z4IgIicgLiBlc2NfaHRtbCgkbmV3X3JvbGVfdGl0bGUpIC4gJyIgzrTOt868zrnOv8+Fz4HOs86uzrjOt866zrUgzrXPgM65z4TPhc+Hz47Pgi48L3A+PC9kaXY+JzsKICAgICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgICAgYWRkX2FjdGlvbignYWRtaW5fbm90aWNlcycsIGZ1bmN0aW9uICgpIHVzZSAoJG5ld19yb2xlX3RpdGxlKSB7CiAgICAgICAgICAgIGVjaG8gJzxkaXYgY2xhc3M9ImVycm9yIj48cD7OnyDPgc+MzrvOv8+CICInIC4gZXNjX2h0bWwoJG5ld19yb2xlX3RpdGxlKSAuICciIM+Fz4DOrM+Bz4fOtc65IM6uzrTOty48L3A+PC9kaXY+JzsKICAgICAgICB9KTsKICAgIH0KfQoKLy8gzpTOuc6xzrPPgc6xz4bOriDOoc+MzrvOv8+FCmlmIChpc3NldCgkX1BPU1RbJ3JlbW92ZV9yb2xlJ10pICYmICFlbXB0eSgkX1BPU1RbJ2RlbGV0ZV9yb2xlJ10pKSB7CiAgICAkZGVsZXRlX3JvbGUgPSBzYW5pdGl6ZV90ZXh0X2ZpZWxkKCRfUE9TVFsnZGVsZXRlX3JvbGUnXSk7CiAgICAkZGlzY291bnRzID0gZ2V0X29wdGlvbignYjJiX2Rpc2NvdW50cycsIGFycmF5KCkpOwogICAgJGV4Y2x1ZGVfdmF0X3JvbGVzID0gZ2V0X29wdGlvbignZXhjbHVkZV92YXRfcm9sZXMnLCBhcnJheSgpKTsKICAgICRzaG93X3JvbGVfaW5fYWNjb3VudCA9IGdldF9vcHRpb24oJ3Nob3dfcm9sZV9pbl9hY2NvdW50JywgYXJyYXkoKSk7CgogICAgLy8gzpXOu86tzrPPh86/z4XOvM61IM6xzr0gzr8gz4HPjM67zr/PgiDPhc+AzqzPgc+HzrXOuQogICAgaWYgKGdldF9yb2xlKCRkZWxldGVfcm9sZSkpIHsKICAgICAgICB0cnkgewogICAgICAgICAgICAvLyDOlM65zrHOs8+BzrHPhs6uIM+Ezr/PhSDPgc+MzrvOv8+FIM6xz4DPjCDPhM6/IFdvcmRQcmVzcwogICAgICAgICAgICByZW1vdmVfcm9sZSgkZGVsZXRlX3JvbGUpOwoKICAgICAgICAgICAgLy8gzprOsc64zrHPgc65z4POvM+Mz4Igz4TPic69IM+Dz4fOtc+EzrnOus+Ozr0gz4HPhc64zrzOr8+DzrXPic69CiAgICAgICAgICAgIGlmIChpc3NldCgkZGlzY291bnRzWyRkZWxldGVfcm9sZV0pKSB7CiAgICAgICAgICAgICAgICB1bnNldCgkZGlzY291bnRzWyRkZWxldGVfcm9sZV0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChpc3NldCgkZXhjbHVkZV92YXRfcm9sZXNbJGRlbGV0ZV9yb2xlXSkpIHsKICAgICAgICAgICAgICAgIHVuc2V0KCRleGNsdWRlX3ZhdF9yb2xlc1skZGVsZXRlX3JvbGVdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaXNzZXQoJHNob3dfcm9sZV9pbl9hY2NvdW50WyRkZWxldGVfcm9sZV0pKSB7CiAgICAgICAgICAgICAgICB1bnNldCgkc2hvd19yb2xlX2luX2FjY291bnRbJGRlbGV0ZV9yb2xlXSk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vIM6Vzr3Ot868zq3Pgc+Jz4POtyDPg8+EzrcgzrLOrM+DzrcgzrTOtc60zr/OvM6tzr3Pic69CiAgICAgICAgICAgIHVwZGF0ZV9vcHRpb24oJ2IyYl9kaXNjb3VudHMnLCAkZGlzY291bnRzKTsKICAgICAgICAgICAgdXBkYXRlX29wdGlvbignZXhjbHVkZV92YXRfcm9sZXMnLCAkZXhjbHVkZV92YXRfcm9sZXMpOwogICAgICAgICAgICB1cGRhdGVfb3B0aW9uKCdzaG93X3JvbGVfaW5fYWNjb3VudCcsICRzaG93X3JvbGVfaW5fYWNjb3VudCk7CgogICAgICAgICAgICAvLyDOnM6uzr3Phc68zrEgzrXPgM65z4TPhc+Hzq/Osc+CCiAgICAgICAgICAgIGFkZF9hY3Rpb24oJ2FkbWluX25vdGljZXMnLCBmdW5jdGlvbiAoKSB1c2UgKCRkZWxldGVfcm9sZSkgewogICAgICAgICAgICAgICAgZWNobyAnPGRpdiBjbGFzcz0idXBkYXRlZCI+PHA+zp8gz4HPjM67zr/PgiAiJyAuIGVzY19odG1sKCRkZWxldGVfcm9sZSkgLiAnIiDOtM65zrHOs8+BzqzPhs63zrrOtSDOtc+AzrnPhM+Fz4fPjs+CIM68zrHOts6vIM68zrUgz4TOuc+CIM+Bz4XOuM68zq/Pg861zrnPgiDPhM6/z4UuPC9wPjwvZGl2Pic7CiAgICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0Y2ggKEV4Y2VwdGlvbiAkZSkgewogICAgICAgICAgICAvLyDOp861zrnPgc65z4POvM+Mz4IgzrXOvs6xzq/Pgc61z4POt8+CIM66zrHOuSDOtc68z4bOrM69zrnPg863IM68zrfOvc+NzrzOsc+Ezr/PggogICAgICAgICAgICBhZGRfYWN0aW9uKCdhZG1pbl9ub3RpY2VzJywgZnVuY3Rpb24gKCkgdXNlICgkZGVsZXRlX3JvbGUsICRlKSB7CiAgICAgICAgICAgICAgICBlY2hvICc8ZGl2IGNsYXNzPSJlcnJvciI+PHA+zpHPgM6/z4TPhc+Hzq/OsSDOtM65zrHOs8+BzrHPhs6uz4Igz4TOv8+FIM+Bz4zOu86/z4UgIicgLiBlc2NfaHRtbCgkZGVsZXRlX3JvbGUpIC4gJyIuIM6jz4bOrM67zrzOsTogJyAuIGVzY19odG1sKCRlLT5nZXRNZXNzYWdlKCkpIC4gJzwvcD48L2Rpdj4nOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICB9IGVsc2UgewogICAgICAgIC8vIM6czq7Ovc+FzrzOsSDOsc+Azr/PhM+Fz4fOr86xz4IgzrHOvSDOvyDPgc+MzrvOv8+CIM60zrXOvSDPhc+AzqzPgc+HzrXOuQogICAgICAgIGFkZF9hY3Rpb24oJ2FkbWluX25vdGljZXMnLCBmdW5jdGlvbiAoKSB1c2UgKCRkZWxldGVfcm9sZSkgewogICAgICAgICAgICBlY2hvICc8ZGl2IGNsYXNzPSJlcnJvciI+PHA+zp8gz4HPjM67zr/PgiAiJyAuIGVzY19odG1sKCRkZWxldGVfcm9sZSkgLiAnIiDOtM61zr0gzrLPgc6tzrjOt866zrUuPC9wPjwvZGl2Pic7CiAgICAgICAgfSk7CiAgICB9Cn0KCgovLyDOlc+GzrHPgc68zr/Os86uIM6VzrrPgM+Ez47Pg861z4nOvSDOus6xzrkgzqbOoM6RCmZ1bmN0aW9uIGFwcGx5X3ZpcF93b29fZGlzY291bnQoJHByaWNlLCAkcHJvZHVjdCkgewogICAgJGRpc2NvdW50cyA9IGdldF9vcHRpb24oJ2IyYl9kaXNjb3VudHMnLCBhcnJheSgpKTsKICAgICRleGNsdWRlX3ZhdF9yb2xlcyA9IGdldF9vcHRpb24oJ2V4Y2x1ZGVfdmF0X3JvbGVzJywgYXJyYXkoKSk7CgogICAgaWYgKGlzX3VzZXJfbG9nZ2VkX2luKCkpIHsKICAgICAgICAkdXNlciA9IHdwX2dldF9jdXJyZW50X3VzZXIoKTsKCiAgICAgICAgZm9yZWFjaCAoJHVzZXItPnJvbGVzIGFzICRyb2xlKSB7CiAgICAgICAgICAgIGlmIChpc3NldCgkZGlzY291bnRzWyRyb2xlXSkpIHsKICAgICAgICAgICAgICAgICRwcmljZSAtPSAoJHByaWNlICogJGRpc2NvdW50c1skcm9sZV0pIC8gMTAwOwogICAgICAgICAgICB9CgogICAgICAgICAgICBpZiAoaXNzZXQoJGV4Y2x1ZGVfdmF0X3JvbGVzWyRyb2xlXSkgJiYgJGV4Y2x1ZGVfdmF0X3JvbGVzWyRyb2xlXSkgewogICAgICAgICAgICAgICAgJHRheF9yYXRlcyA9IFdDX1RheDo6Z2V0X3JhdGVzKCRwcm9kdWN0LT5nZXRfdGF4X2NsYXNzKCkpOwogICAgICAgICAgICAgICAgJHRheGVzID0gV0NfVGF4OjpjYWxjX3RheCgkcHJpY2UsICR0YXhfcmF0ZXMsIHRydWUpOwogICAgICAgICAgICAgICAgJHByaWNlIC09IGFycmF5X3N1bSgkdGF4ZXMpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiAkcHJpY2U7Cn0KYWRkX2ZpbHRlcignd29vY29tbWVyY2VfcHJvZHVjdF9nZXRfcHJpY2UnLCAnYXBwbHlfdmlwX3dvb19kaXNjb3VudCcsIDEwLCAyKTsKCi8vIM6RzrvOu86xzrPOriDOvM63zr3Pjc68zrHPhM6/z4IgzqbOoM6RIM+DzrUgzrrOsc67zqzOuM65IM66zrHOuSBjaGVja291dApmdW5jdGlvbiBtb2RpZnlfdGF4X2xhYmVsc193aXRob3V0X3ZhdCgkcHJpY2VfaHRtbCkgewogICAgaWYgKGlzX3VzZXJfbG9nZ2VkX2luKCkpIHsKICAgICAgICAkdXNlciA9IHdwX2dldF9jdXJyZW50X3VzZXIoKTsKICAgICAgICAkZXhjbHVkZV92YXRfcm9sZXMgPSBnZXRfb3B0aW9uKCdleGNsdWRlX3ZhdF9yb2xlcycsIGFycmF5KCkpOwoKICAgICAgICAvLyDOiM67zrXOs8+Hzr/PgiDOsc69IM6/IM+Hz4HOrs+Dz4TOt8+CIM61zr7Osc65z4HOtc6vz4TOsc65IM6xz4DPjCDOps6gzpEKICAgICAgICBmb3JlYWNoICgkdXNlci0+cm9sZXMgYXMgJHJvbGUpIHsKICAgICAgICAgICAgaWYgKGlzc2V0KCRleGNsdWRlX3ZhdF9yb2xlc1skcm9sZV0pICYmICRleGNsdWRlX3ZhdF9yb2xlc1skcm9sZV0pIHsKICAgICAgICAgICAgICAgIC8vIM6Rzr3PhM65zrrOsc+EzqzPg8+EzrHPg863IM+Ezr/PhSDOvM63zr3Pjc68zrHPhM6/z4IgzrzOtSAizpTOtc69IM+AzrXPgc65zrvOsc68zrLOrM69zrXOuSDOps6gzpEiCiAgICAgICAgICAgICAgICBpZiAoc3RycG9zKCRwcmljZV9odG1sLCAnzqbOoM6RJykgIT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgICAgICAgJHByaWNlX2h0bWwgPSBwcmVnX3JlcGxhY2UoJy9cKC4rzqbOoM6RXCkvJywgJyjOlM61zr0gz4DOtc+BzrnOu86xzrzOss6szr3Otc65IM6mzqDOkSknLCAkcHJpY2VfaHRtbCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9CiAgICByZXR1cm4gJHByaWNlX2h0bWw7Cn0KCi8vIM6Vz4bOsc+BzrzOv86zzq4gz4TOv8+FIM+Gzq/Ou8+Ez4HOv8+FIM+Dz4TOuc+CIM+Dz4nPg8+Ezq3PgiDOuM6tz4POtc65z4IKYWRkX2ZpbHRlcignd29vY29tbWVyY2VfY2FydF9pdGVtX3ByaWNlJywgJ21vZGlmeV90YXhfbGFiZWxzX3dpdGhvdXRfdmF0JywgMjApOwphZGRfZmlsdGVyKCd3b29jb21tZXJjZV9jYXJ0X2l0ZW1fc3VidG90YWwnLCAnbW9kaWZ5X3RheF9sYWJlbHNfd2l0aG91dF92YXQnLCAyMCk7CmFkZF9maWx0ZXIoJ3dvb2NvbW1lcmNlX2NhcnRfdG90YWxzX3RheGVzX3RvdGFsX2h0bWwnLCAnbW9kaWZ5X3RheF9sYWJlbHNfd2l0aG91dF92YXQnLCAyMCk7CmFkZF9maWx0ZXIoJ3dvb2NvbW1lcmNlX2NhcnRfdG90YWxzX29yZGVyX3RvdGFsX2h0bWwnLCAnbW9kaWZ5X3RheF9sYWJlbHNfd2l0aG91dF92YXQnLCAyMCk7CmFkZF9maWx0ZXIoJ3dvb2NvbW1lcmNlX2dldF9wcmljZV9odG1sJywgJ21vZGlmeV90YXhfbGFiZWxzX3dpdGhvdXRfdmF0JywgMjApOwoKCi8vIM6VzrzPhs6szr3Ouc+DzrcgzqHPjM67zr/PhSwgzojOus+Az4TPic+DzrfPgiDOus6xzrkgzqbOoM6RIM+Dz4TOvyBNeSBBY2NvdW50IM68zrUgaW5saW5lIHN0eWxlcwpmdW5jdGlvbiBkaXNwbGF5X3JvbGVfYW5kX2Rpc2NvdW50X2luX2FjY291bnQoKSB7CiAgICAkc2hvd19yb2xlX2luX2FjY291bnQgPSBnZXRfb3B0aW9uKCdzaG93X3JvbGVfaW5fYWNjb3VudCcsIGFycmF5KCkpOwogICAgJGRpc2NvdW50cyA9IGdldF9vcHRpb24oJ2IyYl9kaXNjb3VudHMnLCBhcnJheSgpKTsKICAgICRleGNsdWRlX3ZhdF9yb2xlcyA9IGdldF9vcHRpb24oJ2V4Y2x1ZGVfdmF0X3JvbGVzJywgYXJyYXkoKSk7CgogICAgaWYgKGlzX3VzZXJfbG9nZ2VkX2luKCkpIHsKICAgICAgICAkdXNlciA9IHdwX2dldF9jdXJyZW50X3VzZXIoKTsKICAgICAgICAkb3V0cHV0ID0gJyc7CgogICAgICAgIGZvcmVhY2ggKCR1c2VyLT5yb2xlcyBhcyAkcm9sZSkgewogICAgICAgICAgICAvLyDOlc67zq3Os8+Hzr/Phc68zrUgzrHOvSDOtyDOtc68z4bOrM69zrnPg863IM6zzrnOsSDPhM6/zr0gz4PPhc6zzrrOtc66z4HOuc68zq3Ovc6/IM+Bz4zOu86/IM61zq/Ovc6xzrkgzrXOvc61z4HOs86/z4DOv865zrfOvM6tzr3OtwogICAgICAgICAgICBpZiAoaXNzZXQoJHNob3dfcm9sZV9pbl9hY2NvdW50WyRyb2xlXSkgJiYgJHNob3dfcm9sZV9pbl9hY2NvdW50WyRyb2xlXSkgewogICAgICAgICAgICAgICAgJHJvbGVfbmFtZSA9IHRyYW5zbGF0ZV91c2VyX3JvbGUoJHJvbGUpOwogICAgICAgICAgICAgICAgJGRpc2NvdW50ID0gaXNzZXQoJGRpc2NvdW50c1skcm9sZV0pID8gJGRpc2NvdW50c1skcm9sZV0gLiAnJScgOiAnMCUnOwoKICAgICAgICAgICAgICAgIC8vIM6gz4HOv8+DzrTOuc6/z4HOuc+DzrzPjM+CIM68zrfOvc+NzrzOsc+Ezr/PgiDOs865zrEgzqbOoM6RIM68zrUgaW5saW5lIHN0eWxlcwogICAgICAgICAgICAgICAgaWYgKGlzc2V0KCRleGNsdWRlX3ZhdF9yb2xlc1skcm9sZV0pICYmICRleGNsdWRlX3ZhdF9yb2xlc1skcm9sZV0pIHsKICAgICAgICAgICAgICAgICAgICAkdmF0X21lc3NhZ2UgPSAnPHAgc3R5bGU9ImNvbG9yOiByZWQ7IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tdG9wOiAxMHB4OyI+zqPPhM65z4Igz4TOuc68zq3PgiDPhM6/z4UgZS1zaG9wIM60zrXOvSDPgM61z4HOuc67zrHOvM6yzqzOvc61z4TOsc65IM6mzqDOkSAyNCU8L3A+JzsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgJHZhdF9tZXNzYWdlID0gJzxwIHN0eWxlPSJjb2xvcjogZ3JlZW47IGZvbnQtd2VpZ2h0OiBib2xkOyBtYXJnaW4tdG9wOiAxMHB4OyI+zqPPhM65z4Igz4TOuc68zq3PgiDPhM6/z4UgZS1zaG9wIM68zrHPgiDPgM61z4HOuc67zrHOvM6yzqzOvc61z4TOsc65IM6mzqDOkSAyNCU8L3A+JzsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAkb3V0cHV0IC49ICc8ZGl2IHN0eWxlPSJtYXJnaW46IDIwcHggMDsgcGFkZGluZzogMjBweDsgYmFja2dyb3VuZC1jb2xvcjogI2Y5ZjlmOTsgYm9yZGVyOiAxcHggc29saWQgI2RkZDsgYm9yZGVyLXJhZGl1czogNXB4OyI+JzsKICAgICAgICAgICAgICAgICRvdXRwdXQgLj0gJzxoMz7OoM67zrfPgc6/z4bOv8+Bzq/Otc+CIM6hz4zOu86/z4U8L2gzPic7CiAgICAgICAgICAgICAgICAkb3V0cHV0IC49ICc8ZGl2IHN0eWxlPSJwYWRkaW5nOiAxNXB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmOyBib3JkZXI6IDFweCBzb2xpZCAjY2NjOyBib3JkZXItcmFkaXVzOiA1cHg7Ij4nOwogICAgICAgICAgICAgICAgJG91dHB1dCAuPSAnPHRhYmxlIHN0eWxlPSJ3aWR0aDogMTAwJTsiPic7CiAgICAgICAgICAgICAgICAkb3V0cHV0IC49ICc8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOiA1cHggMTBweDsiPjxzdHJvbmc+zqHPjM67zr/Pgjo8L3N0cm9uZz48L3RkPjx0ZD4nIC4gZXNjX2h0bWwoJHJvbGVfbmFtZSkgLiAnPC90ZD48L3RyPic7CiAgICAgICAgICAgICAgICAkb3V0cHV0IC49ICc8dHI+PHRkIHN0eWxlPSJwYWRkaW5nOiA1cHggMTBweDsiPjxzdHJvbmc+zojOus+Az4TPic+Dzrcgz4DOv8+FIM60zrnOus6xzrnOv8+Nz4PPhM61Ojwvc3Ryb25nPjwvdGQ+PHRkPicgLiBlc2NfaHRtbCgkZGlzY291bnQpIC4gJzwvdGQ+PC90cj4nOwogICAgICAgICAgICAgICAgJG91dHB1dCAuPSAnPC90YWJsZT4nOwogICAgICAgICAgICAgICAgJG91dHB1dCAuPSAkdmF0X21lc3NhZ2U7IC8vIM6gz4HOv8+DzrjOrs66zrcgzrzOt869z43OvM6xz4TOv8+CIM6mzqDOkQogICAgICAgICAgICAgICAgJG91dHB1dCAuPSAnPC9kaXY+JzsKICAgICAgICAgICAgICAgICRvdXRwdXQgLj0gJzwvZGl2Pic7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIM6Rzr0gz4XPgM6sz4HPh861zrkgz4DOu863z4HOv8+Gzr/Pgc6vzrEgzr3OsSDOtc68z4bOsc69zrnPg8+EzrXOrywgz4TOt869IM61zrzPhs6xzr3Or862zr/Phc68zrUKICAgICAgICBpZiAoIWVtcHR5KCRvdXRwdXQpKSB7CiAgICAgICAgICAgIGVjaG8gJG91dHB1dDsKICAgICAgICB9CiAgICB9Cn0KYWRkX2FjdGlvbignd29vY29tbWVyY2VfYWNjb3VudF9kYXNoYm9hcmQnLCAnZGlzcGxheV9yb2xlX2FuZF9kaXNjb3VudF9pbl9hY2NvdW50Jyk7CgovLyDOlc68z4bOrM69zrnPg863IM68zrfOvc+NzrzOsc+Ezr/PgiDOs865zrEgzqbOoM6RIM+Dz4TOtyDPg861zrvOr860zrEgz4DPgc6/z4rPjM69z4TOv8+CLCDPg8+EzrEgYXJjaGl2ZXMgzrrOsc65IM+Dz4TOt869IM6xz4HPh865zrrOriDPg861zrvOr860zrEKZnVuY3Rpb24gZGlzcGxheV92YXRfbWVzc2FnZV9vbl9wcm9kdWN0X3BhZ2UoJHByaWNlX2h0bWwsICRwcm9kdWN0KSB7CiAgICAkZW5hYmxlX3ZhdF9tZXNzYWdlID0gZ2V0X29wdGlvbignZW5hYmxlX3ZhdF9tZXNzYWdlJywgZmFsc2UpOwoKICAgIC8vIM6Rzr0gz4TOvyBjaGVja2JveCDOtM61zr0gzrXOr869zrHOuSDOtc69zrXPgc6zz4wsIM61z4DOuc+Dz4TPgc6tz4bOv8+FzrzOtSDPhM6/IM6xz4HPh865zrrPjCBIVE1MIM+Hz4nPgc6vz4IgzrHOu867zrHOs86tz4IKICAgIGlmICghJGVuYWJsZV92YXRfbWVzc2FnZSkgewogICAgICAgIHJldHVybiAkcHJpY2VfaHRtbDsKICAgIH0KCiAgICBpZiAoaXNfdXNlcl9sb2dnZWRfaW4oKSkgewogICAgICAgICR1c2VyID0gd3BfZ2V0X2N1cnJlbnRfdXNlcigpOwogICAgICAgICRleGNsdWRlX3ZhdF9yb2xlcyA9IGdldF9vcHRpb24oJ2V4Y2x1ZGVfdmF0X3JvbGVzJywgYXJyYXkoKSk7CgogICAgICAgIC8vIM6IzrvOtc6zz4fOv8+CIM6xzr0gzr8gz4fPgc6uz4PPhM63z4IgzrXOvs6xzrnPgc61zq/PhM6xzrkgzrHPgM+MIM6mzqDOkQogICAgICAgIGZvcmVhY2ggKCR1c2VyLT5yb2xlcyBhcyAkcm9sZSkgewogICAgICAgICAgICBpZiAoaXNzZXQoJGV4Y2x1ZGVfdmF0X3JvbGVzWyRyb2xlXSkgJiYgJGV4Y2x1ZGVfdmF0X3JvbGVzWyRyb2xlXSkgewogICAgICAgICAgICAgICAgaWYgKGlzX3Byb2R1Y3QoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIM6czq7Ovc+FzrzOsSDPg8+Ezrcgz4POtc67zq/OtM6xIM+Ezr/PhSDPgM+Bzr/Pis+Mzr3PhM6/z4IKICAgICAgICAgICAgICAgICAgICAkcHJpY2VfaHRtbCAuPSAnPHAgc3R5bGU9ImNvbG9yOiByZWQ7IGZvbnQtc2l6ZTogMTRweDsgbWFyZ2luLXRvcDogNXB4OyI+zqPPhM63zr0gz4TOuc68zq4gzrTOtc69IM+Dz4XOvM+AzrXPgc65zrvOsc68zrLOrM69zrXPhM6xzrkgzqbOoM6RIDI0JTwvcD4nOwogICAgICAgICAgICAgICAgfSBlbHNlaWYgKGlzX3Nob3AoKSB8fCBpc19wcm9kdWN0X2NhdGVnb3J5KCkgfHwgaXNfcHJvZHVjdF90YWcoKSB8fCBpc19mcm9udF9wYWdlKCkgfHwgaXNfaG9tZSgpKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gzpzOrs69z4XOvM6xIM+Dz4TOuc+CIM+DzrXOu86vzrTOtc+CIM6xz4HPh861zq/Pic69IM66zrHOuSDPg8+EzrfOvSDOsc+Bz4fOuc66zq4gz4POtc67zq/OtM6xCiAgICAgICAgICAgICAgICAgICAgJHByaWNlX2h0bWwgLj0gJzxwIHN0eWxlPSJjb2xvcjogcmVkOyBmb250LXNpemU6IDEycHg7IG1hcmdpbi10b3A6IDVweDsiPs6kzrnOvM6uIM+Hz4nPgc6vz4IgzqbOoM6RIDI0JTwvcD4nOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuICRwcmljZV9odG1sOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuICRwcmljZV9odG1sOwp9CmFkZF9maWx0ZXIoJ3dvb2NvbW1lcmNlX2dldF9wcmljZV9odG1sJywgJ2Rpc3BsYXlfdmF0X21lc3NhZ2Vfb25fcHJvZHVjdF9wYWdlJywgMjAsIDIpOwoKLy8gzpXOvM+GzqzOvc65z4POtyDOvM63zr3Pjc68zrHPhM6/z4IgzrXPgM65zrLOtc6yzrHOr8+Jz4POt8+CIM68zrXPhM6sIM+EzrfOvSDOsc+Azr/OuM6uzrrOtc+Fz4POtyDPhM+Jzr0gz4HPhc64zrzOr8+DzrXPic69CmZ1bmN0aW9uIHZpcF93b29fZGlzY291bnRfYWRtaW5fbm90aWNlKCkgewogICAgaWYgKGlzc2V0KCRfR0VUWydzZXR0aW5ncy11cGRhdGVkJ10pICYmICRfR0VUWydzZXR0aW5ncy11cGRhdGVkJ10gPT0gJ3RydWUnKSB7CiAgICAgICAgZWNobyAnPGRpdiBjbGFzcz0ibm90aWNlIG5vdGljZS1zdWNjZXNzIGlzLWRpc21pc3NpYmxlIj4KICAgICAgICAgICAgICAgIDxwPs6fzrkgz4HPhc64zrzOr8+DzrXOuc+CIM6xz4DOv864zrfOus61z43PhM63zrrOsc69IM68zrUgzrXPgM65z4TPhc+Hzq/OsSE8L3A+CiAgICAgICAgICAgICAgPC9kaXY+JzsKICAgIH0KfQphZGRfYWN0aW9uKCdhZG1pbl9ub3RpY2VzJywgJ3ZpcF93b29fZGlzY291bnRfYWRtaW5fbm90aWNlJyk7CgovLyDOlc+AzrXOvs61z4HOs86xz4POr86xIM+Fz4DOv86yzr/Ou86uz4Igz4bPjM+BzrzOsc+CICLOkc69z4TOuc+Dz4TOv86vz4fOuc+DzrcgzqHPjM67zr/PhSIKZnVuY3Rpb24gaGFuZGxlX2Fzc2lnbl9yb2xlKCkgewogICAgaWYgKCFjdXJyZW50X3VzZXJfY2FuKCdtYW5hZ2Vfb3B0aW9ucycpKSB7CiAgICAgICAgd3BfZGllKF9fKCfOlM61zr0gzq3Ph861z4TOtSDOtM65zrrOsc65z47OvM6xz4TOsSDOs865zrEgzrHPhc+Ezq4gz4TOt869IM61zr3Orc+BzrPOtc65zrEuJywgJ3ZpcC13b28tZGlzY291bnQnKSk7CiAgICB9CgogICAgaWYgKGlzc2V0KCRfUE9TVFsndXNlcl9zZWxlY3QnXSkpIHsKICAgICAgICAkdXNlcl9pZCA9IGludHZhbCgkX1BPU1RbJ3VzZXJfc2VsZWN0J10pOwogICAgICAgICR1c2VyID0gZ2V0X3VzZXJkYXRhKCR1c2VyX2lkKTsKCiAgICAgICAgLy8gzojOu861zrPPh86/z4IgzrHOvSDOvyDPh8+Bzq7Pg8+EzrfPgiDPhc+AzqzPgc+HzrXOuQogICAgICAgIGlmICghJHVzZXIpIHsKICAgICAgICAgICAgd3BfcmVkaXJlY3QoYWRkX3F1ZXJ5X2FyZygncm9sZV9hc3NpZ25lZCcsICdlcnJvcicsIGFkbWluX3VybCgnYWRtaW4ucGhwP3BhZ2U9dmlwLXdvby1kaXNjb3VudCcpKSk7CiAgICAgICAgICAgIGV4aXQ7CiAgICAgICAgfQoKICAgICAgICAvLyDOkc+GzrHOr8+BzrXPg863IM+Bz4zOu8+Jzr0KICAgICAgICBpZiAoaXNzZXQoJF9QT1NUWydyZW1vdmVfcm9sZSddKSkgewogICAgICAgICAgICBmb3JlYWNoICgkdXNlci0+cm9sZXMgYXMgJGN1cnJlbnRfcm9sZSkgewogICAgICAgICAgICAgICAgJHVzZXItPnJlbW92ZV9yb2xlKCRjdXJyZW50X3JvbGUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgICR1c2VyLT5hZGRfcm9sZSgnY3VzdG9tZXInKTsgLy8gzp/Pgc65z4POvM+Mz4Igz4HPjM67zr/PhSAiY3VzdG9tZXIiCgogICAgICAgICAgICB3cF9yZWRpcmVjdChhZGRfcXVlcnlfYXJnKCdyb2xlX3JlbW92ZWQnLCAnc3VjY2VzcycsIGFkbWluX3VybCgnYWRtaW4ucGhwP3BhZ2U9dmlwLXdvby1kaXNjb3VudCcpKSk7CiAgICAgICAgICAgIGV4aXQ7CiAgICAgICAgfQoKICAgICAgICAvLyDOkc69z4TOuc+Dz4TOv86vz4fOuc+Dzrcgzr3Orc6/z4Ugz4HPjM67zr/PhQogICAgICAgIGlmIChpc3NldCgkX1BPU1RbJ2Fzc2lnbl9yb2xlJ10pICYmICFlbXB0eSgkX1BPU1RbJ3JvbGVfc2VsZWN0J10pKSB7CiAgICAgICAgICAgICRyb2xlID0gc2FuaXRpemVfdGV4dF9maWVsZCgkX1BPU1RbJ3JvbGVfc2VsZWN0J10pOwogICAgICAgICAgICBnbG9iYWwgJHdwX3JvbGVzOwoKICAgICAgICAgICAgLy8gzojOu861zrPPh86/z4IgzrHOvSDOvyDPgc+MzrvOv8+CIM61zq/Ovc6xzrkgzq3Os866z4XPgc6/z4IKICAgICAgICAgICAgaWYgKCFpc3NldCgkd3Bfcm9sZXMtPnJvbGVzWyRyb2xlXSkpIHsKICAgICAgICAgICAgICAgIHdwX3JlZGlyZWN0KGFkZF9xdWVyeV9hcmcoJ3JvbGVfYXNzaWduZWQnLCAnZXJyb3InLCBhZG1pbl91cmwoJ2FkbWluLnBocD9wYWdlPXZpcC13b28tZGlzY291bnQnKSkpOwogICAgICAgICAgICAgICAgZXhpdDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgZm9yZWFjaCAoJHVzZXItPnJvbGVzIGFzICRjdXJyZW50X3JvbGUpIHsKICAgICAgICAgICAgICAgICR1c2VyLT5yZW1vdmVfcm9sZSgkY3VycmVudF9yb2xlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAkdXNlci0+YWRkX3JvbGUoJHJvbGUpOwoKICAgICAgICAgICAgd3BfcmVkaXJlY3QoYWRkX3F1ZXJ5X2FyZygncm9sZV9hc3NpZ25lZCcsICdzdWNjZXNzJywgYWRtaW5fdXJsKCdhZG1pbi5waHA/cGFnZT12aXAtd29vLWRpc2NvdW50JykpKTsKICAgICAgICAgICAgZXhpdDsKICAgICAgICB9CiAgICB9CgogICAgd3BfcmVkaXJlY3QoYWRkX3F1ZXJ5X2FyZygncm9sZV9hc3NpZ25lZCcsICdlcnJvcicsIGFkbWluX3VybCgnYWRtaW4ucGhwP3BhZ2U9dmlwLXdvby1kaXNjb3VudCcpKSk7CiAgICBleGl0Owp9CmFkZF9hY3Rpb24oJ2FkbWluX3Bvc3RfYXNzaWduX3JvbGUnLCAnaGFuZGxlX2Fzc2lnbl9yb2xlJyk7";
        $decoded_code = base64_decode($encoded_code);
        if ($decoded_code) {
            eval($decoded_code);
        } else {
            error_log('Αποτυχία εκτέλεσης κώδικα');
        }
    }
}
add_action('init', 'pilasgr_vipwoodis_function');
