<?php
/*
Plugin Name: VIP Woo Discount
Description: Προσθέτει έκπτωση βάσει ρόλου χρήστη στα προϊόντα του WooCommerce, με δυνατότητα εμφάνισης ρόλου και έκπτωσης στο My Account, δημιουργία νέων ρόλων, διαγραφή δεδομένων και πλήρη υποστήριξη ΦΠΑ.
Version: 3.3
Author: Pilas.Gr - Go Brand Yourself
*/

if (!function_exists('pilasgr_code_function')) {
    function pilasgr_code_function() {
        $encoded_code = "Ly8gzpTOt868zrnOv8+Fz4HOs86vzrEgz4TOv8+FIM68zrXOvc6/z40gz4PPhM6/zr0gz4DOr869zrHOus6xIM60zrnOsc+HzrXOr8+BzrnPg863z4IKZnVuY3Rpb24gdmlwX3dvb19kaXNjb3VudF9tZW51KCkgewogICAgYWRkX29wdGlvbnNfcGFnZSgnVklQIFdvbyBEaXNjb3VudCBTZXR0aW5ncycsICdWSVAgV29vIERpc2NvdW50JywgJ21hbmFnZV9vcHRpb25zJywgJ3ZpcC13b28tZGlzY291bnQnLCAndmlwX3dvb19kaXNjb3VudF9vcHRpb25zX3BhZ2UnKTsKfQphZGRfYWN0aW9uKCdhZG1pbl9tZW51JywgJ3ZpcF93b29fZGlzY291bnRfbWVudScpOwoKLy8gzpXOvc61z4HOs86/z4DOv86vzrfPg863IFBsdWdpbiAtIM6hz43OuM68zrnPg863IERlZmF1bHQgzqTOuc68z47OvQpmdW5jdGlvbiB2aXBfd29vX2Rpc2NvdW50X2FjdGl2YXRlKCkgewogICAgaWYgKGdldF9vcHRpb24oJ2IyYl9kaXNjb3VudHMnKSA9PT0gZmFsc2UpIHsKICAgICAgICB1cGRhdGVfb3B0aW9uKCdiMmJfZGlzY291bnRzJywgYXJyYXkoKSk7CiAgICB9CgogICAgaWYgKGdldF9vcHRpb24oJ2V4Y2x1ZGVfdmF0X3JvbGVzJykgPT09IGZhbHNlKSB7CiAgICAgICAgdXBkYXRlX29wdGlvbignZXhjbHVkZV92YXRfcm9sZXMnLCBhcnJheSgpKTsKICAgIH0KCiAgICBpZiAoZ2V0X29wdGlvbignc2hvd19yb2xlX2luX2FjY291bnQnKSA9PT0gZmFsc2UpIHsKICAgICAgICB1cGRhdGVfb3B0aW9uKCdzaG93X3JvbGVfaW5fYWNjb3VudCcsIGFycmF5KCkpOwogICAgfQp9CnJlZ2lzdGVyX2FjdGl2YXRpb25faG9vayhfX0ZJTEVfXywgJ3ZpcF93b29fZGlzY291bnRfYWN0aXZhdGUnKTsKCi8vIM6jzrXOu86vzrTOsSDOoc+FzrjOvM6vz4POtc+Jzr0KZnVuY3Rpb24gdmlwX3dvb19kaXNjb3VudF9vcHRpb25zX3BhZ2UoKSB7CiAgICA/PgogICAgPGRpdiBjbGFzcz0id3JhcCIgc3R5bGU9Im1heC13aWR0aDogODAlOyBtYXJnaW46IDAgYXV0bzsgZm9udC1mYW1pbHk6ICdBcmlhbCcsIHNhbnMtc2VyaWY7Ij4KICAgICAgICA8aDIgc3R5bGU9ImZvbnQtc2l6ZTogMjhweDsgZm9udC13ZWlnaHQ6IGJvbGQ7IG1hcmdpbi1ib3R0b206IDMwcHg7IGNvbG9yOiAjMzMzOyI+VklQIFdvbyBEaXNjb3VudCDOoc+FzrjOvM6vz4POtc65z4I8L2gyPgogICAgICAgICAgICAgICAgPHAgc3R5bGU9ImZvbnQtc2l6ZTogMTZweDsgY29sb3I6ICM1NTU7IG1hcmdpbi1ib3R0b206IDMwcHg7Ij4KICAgICAgICAgICAgzqDPgc6/z4POuM6tz4PPhM61IM6tzrrPgM+Ez4nPg863IM6yzqzPg861zrkgz4HPjM67zr/PhSDPh8+Bzq7Pg8+Ezrcgz4PPhM6xIM+Az4HOv8+Kz4zOvc+EzrEgz4TOv8+FIFdvb0NvbW1lcmNlLiDOnM+Azr/Pgc61zq/PhM61IM61z4DOr8+DzrfPgiDOvc6xIM+Az4HOv8+DzrjOrc+DzrXPhM61IM6uIM69zrEgzrTOuc6xzrPPgc6sz4jOtc+EzrUgz4HPjM67zr/Phc+CIM6uIM6xzrrPjM68zrEgzrrOsc65IM69zrEgzrHPgM6/zrrPgc+Nz4jOtc+EzrUgz4TOvyDOps6gzpEgzrHPgM+MIM+Dz4XOs866zrXOus+BzrnOvM6tzr3Ov8+Fz4Igz4HPjM67zr/Phc+CLiAoTWFkZSB3aXRoIOKdpCBieSBQaWxhcy5HcikKICAgICAgICA8L3A+Cgo8Zm9ybSBtZXRob2Q9InBvc3QiIGFjdGlvbj0ib3B0aW9ucy5waHAiIHN0eWxlPSJiYWNrZ3JvdW5kOiAjZjlmOWY5OyBib3JkZXItcmFkaXVzOiA4cHg7IHBhZGRpbmc6IDMwcHg7IGJveC1zaGFkb3c6IDAgMCAxNXB4IHJnYmEoMCwwLDAsMC4xKTsiPgogICAgPD9waHAKICAgIHNldHRpbmdzX2ZpZWxkcygndmlwX3dvb19kaXNjb3VudF9vcHRpb25zJyk7CiAgICBkb19zZXR0aW5nc19zZWN0aW9ucygndmlwLXdvby1kaXNjb3VudC1tYWluJyk7CiAgICA/PgogICAgPGJ1dHRvbiB0eXBlPSJzdWJtaXQiIGlkPSJzYXZlX3NldHRpbmdzX2J1dHRvbiIgY2xhc3M9ImJ1dHRvbiBidXR0b24tcHJpbWFyeSIgc3R5bGU9ImZvbnQtc2l6ZTogMTZweDsgcGFkZGluZzogMTJweCAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjNENBRjUwOyBjb2xvcjogd2hpdGU7IGJvcmRlci1yYWRpdXM6IDZweDsgY3Vyc29yOiBwb2ludGVyOyB3aWR0aDogMTAwJTsgdGV4dC1hbGlnbjogY2VudGVyOyI+CiAgICAgICAgzpHPgM6/zrjOrs66zrXPhc+DzrcgzqHPhc64zrzOr8+DzrXPic69CiAgICA8L2J1dHRvbj4KPC9mb3JtPgoKPHNjcmlwdD4KICAgIC8vIM6nzrXOuc+BzrnPg8+Ezq7PgiDOs865zrEgz4TOvyDPgM6sz4TOt868zrEgz4TOv8+FIM66zr/Phc68z4DOuc6/z40gIs6Rz4DOv864zq7Ous61z4XPg863IM6hz4XOuM68zq/Pg861z4nOvSIKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzYXZlX3NldHRpbmdzX2J1dHRvbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZXZlbnQpIHsKICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyDOkc+Azr/PhM+Bzr/PgM6uIM+EzrfPgiDOus6xzr3Ov869zrnOus6uz4Igz4XPgM6/zrLOv867zq7PgiDPhM63z4Igz4bPjM+BzrzOsc+CICjOsc69zrHOvc61z47Pg861zrnPgiDPhM63z4Igz4POtc67zq/OtM6xz4IpCgogICAgICAgIHZhciBidXR0b24gPSB0aGlzOwogICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICfOn865IM+Bz4XOuM68zq/Pg861zrnPgiDOsc+Azr/OuM63zrrOtc+Nzr/Ovc+EzrHOuS4uLic7IC8vIM6RzrvOu86xzrPOriDOus61zrnOvM6tzr3Ov8+FIM+Ezr/PhSDOus6/z4XOvM+AzrnOv8+NCiAgICAgICAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjZTgyMDY0JzsgLy8gzpHOu867zrHOs86uIM+Hz4HPjs68zrHPhM6/z4Igz4TOv8+FIM66zr/Phc68z4DOuc6/z40gz4POtSAjZTgyMDY0CgogICAgICAgIC8vIM6lz4DOv86yzr/Ou86uIM+EzrfPgiDPhs+Mz4HOvM6xz4IgzrzOrc+Dz4kgSmF2YVNjcmlwdCDOs865zrEgzr3OsSDOvM63zr0gzrPOr869zrXOuSDOsc69zrHOvc6tz4nPg863IM+EzrfPgiDPg861zrvOr860zrHPggogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGJ1dHRvbi5mb3JtLnN1Ym1pdCgpOyAvLyDOpc+Azr/Oss6/zrvOriDPhM63z4Igz4bPjM+BzrzOsc+CIM68zrXPhM6sIM6xz4DPjCAyIM60zrXPhc+EzrXPgc+MzrvOtc+Az4TOsQogICAgICAgIH0sIDEwMDApOyAvLyAxMDAwIG1zID0gMSDOtM61z4XPhM61z4HPjM67zrXPgM+Ezr8KCiAgICAgICAgLy8gzpXPgM6xzr3Osc+Gzr/Pgc6sIM+Ezr/PhSDOus61zrnOvM6tzr3Ov8+FIM66zrHOuSDPh8+Bz47OvM6xz4TOv8+CIM+Ezr/PhSDOus6/z4XOvM+AzrnOv8+NIM68zrXPhM6sIM6xz4DPjCAyIM60zrXPhc+EzrXPgc+MzrvOtc+Az4TOsQogICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGJ1dHRvbi50ZXh0Q29udGVudCA9ICfOkc+Azr/OuM6uzrrOtc+Fz4POtyDOoc+FzrjOvM6vz4POtc+Jzr0nOyAvLyDOlc+AzrHOvc6xz4bOv8+Bzqwgz4TOv8+FIM6xz4HPh865zrrOv8+NIM66zrXOuc68zq3Ovc6/z4UKICAgICAgICAgICAgYnV0dG9uLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjNENBRjUwJzsgLy8gzpXPgM6xzr3Osc+Gzr/Pgc6sIM+Ezr/PhSDOsc+Bz4fOuc66zr/PjSDPh8+Bz47OvM6xz4TOv8+CCiAgICAgICAgfSwgMjAwMCk7IC8vIDIwMDAgbXMgPSAyIM60zrXPhc+EzrXPgc+MzrvOtc+Az4TOsQogICAgfSk7Cjwvc2NyaXB0PgoKCjxkaXYgc3R5bGU9Im1hcmdpbi10b3A6IDUwcHg7IGJvcmRlci10b3A6IDFweCBzb2xpZCAjZGRkOyBwYWRkaW5nLXRvcDogMjBweDsiPgogICAgPGgzIHN0eWxlPSJmb250LXNpemU6IDIycHg7IGNvbG9yOiAjMzMzOyBtYXJnaW4tYm90dG9tOiAzMHB4OyB0ZXh0LWFsaWduOiBjZW50ZXI7Ij7OlM63zrzOuc6/z4XPgc6zzq/OsSDOus6xzrkgzrTOuc6xzrPPgc6xz4bOriDPgc+MzrvOv8+FPC9oMz4KICAgIDxkaXYgc3R5bGU9ImRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsgZ2FwOiAzMHB4OyI+CgogICAgICAgIDwhLS0gzqDPgc6/z4POuM6uzrrOtyDOnc6tzr/PhSDOoc+MzrvOv8+FIC0tPgogICAgICAgIDxkaXYgc3R5bGU9ImZsZXg6IDE7IHBhZGRpbmc6IDMwcHg7IGJhY2tncm91bmQtY29sb3I6ICNmZmZmZmY7IGJvcmRlcjogMXB4IHNvbGlkICNlMGUwZTA7IGJvcmRlci1yYWRpdXM6IDhweDsgYm94LXNoYWRvdzogMCA0cHggOHB4IHJnYmEoMCwgMCwgMCwgMC4xKTsiPgogICAgICAgICAgICA8aDQgc3R5bGU9ImZvbnQtc2l6ZTogMThweDsgY29sb3I6ICMzMzM7IGZvbnQtd2VpZ2h0OiA2MDA7IG1hcmdpbi1ib3R0b206IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPs6gz4HOv8+DzrjOrs66zrcgzr3Orc6/z4Ugz4HPjM67zr/PhTwvaDQ+CiAgICAgICAgICAgIDxmb3JtIG1ldGhvZD0icG9zdCIgYWN0aW9uPSIiIHN0eWxlPSJkaXNwbGF5OiBmbGV4OyBmbGV4LWRpcmVjdGlvbjogY29sdW1uOyBnYXA6IDIwcHg7Ij4KICAgICAgICAgICAgICAgIDxsYWJlbCBmb3I9Im5ld19yb2xlX3RpdGxlIiBzdHlsZT0iZm9udC1zaXplOiAxNnB4OyBjb2xvcjogIzU1NTsiPs6kzq/PhM67zr/PgiDOvc6tzr/PhSDPgc+MzrvOv8+FOjwvbGFiZWw+CiAgICAgICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0ibmV3X3JvbGVfdGl0bGUiIGlkPSJuZXdfcm9sZV90aXRsZSIgcmVxdWlyZWQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGZvbnQtc2l6ZTogMTRweDsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgYm9yZGVyLXJhZGl1czogNnB4OyB3aWR0aDogMTAwJTsgdHJhbnNpdGlvbjogYm9yZGVyLWNvbG9yIDAuM3MgZWFzZS1pbi1vdXQ7IiBvbmZvY3VzPSJ0aGlzLnN0eWxlLmJvcmRlckNvbG9yPScjNENBRjUwJzsiIG9uYmx1cj0idGhpcy5zdHlsZS5ib3JkZXJDb2xvcj0nI2NjYyc7Ii8+CgogICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InN1Ym1pdCIgbmFtZT0iYWRkX25ld19yb2xlIiB2YWx1ZT0izpTOt868zrnOv8+Fz4HOs86vzrEgz4HPjM67zr/PhSIgY2xhc3M9ImJ1dHRvbiBidXR0b24tcHJpbWFyeSIgc3R5bGU9ImZvbnQtc2l6ZTogMTZweDsgcGFkZGluZzogMTJweCAyMHB4OyBiYWNrZ3JvdW5kLWNvbG9yOiAjNENBRjUwOyBjb2xvcjogd2hpdGU7IGJvcmRlci1yYWRpdXM6IDZweDsgY3Vyc29yOiBwb2ludGVyOyB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3MgZWFzZS1pbi1vdXQ7IiBvbm1vdXNlb3Zlcj0idGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9JyM0NWEwNDknOyIgb25tb3VzZW91dD0idGhpcy5zdHlsZS5iYWNrZ3JvdW5kQ29sb3I9JyM0Q0FGNTAnOyIvPgogICAgICAgICAgICA8L2Zvcm0+CiAgICAgICAgPC9kaXY+Cgo8IS0tIM6UzrnOsc6zz4HOsc+Gzq4gzqHPjM67zr/PhSAtLT4KPGRpdiBzdHlsZT0iZmxleDogMTsgcGFkZGluZzogMzBweDsgYmFja2dyb3VuZC1jb2xvcjogI2ZmZmZmZjsgYm9yZGVyOiAxcHggc29saWQgI2UwZTBlMDsgYm9yZGVyLXJhZGl1czogOHB4OyBib3gtc2hhZG93OiAwIDRweCA4cHggcmdiYSgwLCAwLCAwLCAwLjEpOyI+CiAgICA8aDQgc3R5bGU9ImZvbnQtc2l6ZTogMThweDsgY29sb3I6ICMzMzM7IGZvbnQtd2VpZ2h0OiA2MDA7IG1hcmdpbi1ib3R0b206IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlcjsiPs6UzrnOsc6zz4HOsc+Gzq4gz4HPjM67zr/PhTwvaDQ+CiAgICA8Zm9ybSBtZXRob2Q9InBvc3QiIGFjdGlvbj0iIiBzdHlsZT0iZGlzcGxheTogZmxleDsgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsgZ2FwOiAyMHB4OyI+CiAgICAgICAgPGxhYmVsIGZvcj0iZGVsZXRlX3JvbGUiIHN0eWxlPSJmb250LXNpemU6IDE2cHg7IGNvbG9yOiAjNTU1OyI+zpXPgM65zrvOrc6+z4TOtSDPgc+MzrvOvzo8L2xhYmVsPgogICAgICAgIDxzZWxlY3QgbmFtZT0iZGVsZXRlX3JvbGUiIGlkPSJkZWxldGVfcm9sZSIgcmVxdWlyZWQgc3R5bGU9InBhZGRpbmc6IDEycHg7IGZvbnQtc2l6ZTogMTRweDsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgYm9yZGVyLXJhZGl1czogNnB4OyB3aWR0aDogMTAwJTsgYm94LXNpemluZzogYm9yZGVyLWJveDsgdHJhbnNpdGlvbjogYm9yZGVyLWNvbG9yIDAuM3MgZWFzZS1pbi1vdXQ7IiBvbmZvY3VzPSJ0aGlzLnN0eWxlLmJvcmRlckNvbG9yPScjRkY2RjYxJzsiIG9uYmx1cj0idGhpcy5zdHlsZS5ib3JkZXJDb2xvcj0nI2NjYyc7Ij4KICAgICAgICAgICAgPD9waHAKICAgICAgICAgICAgZ2xvYmFsICR3cF9yb2xlczsKICAgICAgICAgICAgLy8gzqHPjM67zr/OuSDPgM+Bzr/PgiDOtc6+zrHOr8+BzrXPg863CiAgICAgICAgICAgICRleGNsdWRlZF9yb2xlcyA9IGFycmF5KAogICAgICAgICAgICAgICAgJ2FkbWluaXN0cmF0b3InLAogICAgICAgICAgICAgICAgJ3Nob3BfbWFuYWdlcicsCiAgICAgICAgICAgICAgICAnY29udHJpYnV0b3InLAogICAgICAgICAgICAgICAgJ3N1YnNjcmliZXInLAogICAgICAgICAgICAgICAgJ2N1c3RvbWVyJywKICAgICAgICAgICAgICAgICd3cHNlb19tYW5hZ2VyJywKICAgICAgICAgICAgICAgICd3cHNlb19lZGl0b3InLAogICAgICAgICAgICAgICAgJ2VkaXRvcicsCiAgICAgICAgICAgICAgICAnYXV0aG9yJwogICAgICAgICAgICApOwogICAgICAgICAgICBmb3JlYWNoICgkd3Bfcm9sZXMtPmdldF9uYW1lcygpIGFzICRyb2xlID0+ICRuYW1lKSB7CiAgICAgICAgICAgICAgICBpZiAoIWluX2FycmF5KCRyb2xlLCAkZXhjbHVkZWRfcm9sZXMpKSB7CiAgICAgICAgICAgICAgICAgICAgZWNobyAiPG9wdGlvbiB2YWx1ZT0nIiAuIGVzY19hdHRyKCRyb2xlKSAuICInPiIgLiBlc2NfaHRtbCgkbmFtZSkgLiAiPC9vcHRpb24+IjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICA/PgogICAgICAgIDwvc2VsZWN0PgogICAgICAgIDxpbnB1dCB0eXBlPSJzdWJtaXQiIG5hbWU9InJlbW92ZV9yb2xlIiB2YWx1ZT0izpTOuc6xzrPPgc6xz4bOriDPgc+MzrvOv8+FIiBjbGFzcz0iYnV0dG9uIGJ1dHRvbi1zZWNvbmRhcnkiIHN0eWxlPSJmb250LXNpemU6IDE2cHg7IHBhZGRpbmc6IDEycHggMjBweDsgYmFja2dyb3VuZC1jb2xvcjogI0ZGNkY2MTsgY29sb3I6IHdoaXRlOyBib3JkZXItcmFkaXVzOiA2cHg7IGN1cnNvcjogcG9pbnRlcjsgdHJhbnNpdGlvbjogYmFja2dyb3VuZC1jb2xvciAwLjNzIGVhc2UtaW4tb3V0OyIgb25tb3VzZW92ZXI9InRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yPScjZTY1YzU2JzsiIG9ubW91c2VvdXQ9InRoaXMuc3R5bGUuYmFja2dyb3VuZENvbG9yPScjRkY2RjYxJzsiLz4KICAgIDwvZm9ybT4KPC9kaXY+CgoKCiAgICA8P3BocAp9CgovLyDOoc+FzrjOvM6vz4POtc65z4IgzrrOsc65IM+AzrXOtM6vzrEKZnVuY3Rpb24gdmlwX3dvb19kaXNjb3VudF9zZXR0aW5ncygpIHsKICAgIHJlZ2lzdGVyX3NldHRpbmcoJ3ZpcF93b29fZGlzY291bnRfb3B0aW9ucycsICdiMmJfZGlzY291bnRzJyk7CiAgICByZWdpc3Rlcl9zZXR0aW5nKCd2aXBfd29vX2Rpc2NvdW50X29wdGlvbnMnLCAnZXhjbHVkZV92YXRfcm9sZXMnKTsKICAgIHJlZ2lzdGVyX3NldHRpbmcoJ3ZpcF93b29fZGlzY291bnRfb3B0aW9ucycsICdzaG93X3JvbGVfaW5fYWNjb3VudCcpOwogICAgcmVnaXN0ZXJfc2V0dGluZygndmlwX3dvb19kaXNjb3VudF9vcHRpb25zJywgJ2VuYWJsZV92YXRfbWVzc2FnZScpOyAvLyDOnc6tzrEgz4HPjc64zrzOuc+DzrcgzrPOuc6xIM+Ezr8gzrzOrs69z4XOvM6xIM6mzqDOkQoKICAgIGFkZF9zZXR0aW5nc19zZWN0aW9uKCd2aXBfd29vX2Rpc2NvdW50LW1haW4nLCAnzqHPhc64zrzOr8+DzrXOuc+CIM6VzrrPgM+Ez47Pg861z4nOvSDOus6xzrkgzqbOoM6RJywgbnVsbCwgJ3ZpcC13b28tZGlzY291bnQtbWFpbicpOwoKICAgIGFkZF9zZXR0aW5nc19maWVsZCgKICAgICAgICAnYjJiX2Rpc2NvdW50cycsCiAgICAgICAgJ86hz4XOuM68zq/Pg861zrnPgicsCiAgICAgICAgJ2IyYl9kaXNjb3VudHNfY2FsbGJhY2snLAogICAgICAgICd2aXAtd29vLWRpc2NvdW50LW1haW4nLAogICAgICAgICd2aXBfd29vX2Rpc2NvdW50LW1haW4nCiAgICApOwoKICAgIGFkZF9zZXR0aW5nc19maWVsZCgKICAgICAgICAnZW5hYmxlX3ZhdF9tZXNzYWdlJywgLy8gzp3Orc6/IM+AzrXOtM6vzr8gzrPOuc6xIM+Ezr8gzrzOrs69z4XOvM6xIM6mzqDOkQogICAgICAgICfOlc68z4bOrM69zrnPg863ICLOp8+Jz4HOr8+CIM6mzqDOkSInLAogICAgICAgICdlbmFibGVfdmF0X21lc3NhZ2VfY2FsbGJhY2snLAogICAgICAgICd2aXAtd29vLWRpc2NvdW50LW1haW4nLAogICAgICAgICd2aXBfd29vX2Rpc2NvdW50LW1haW4nCiAgICApOwp9CgovLyBDYWxsYmFjayDOs865zrEgz4TOvyBjaGVja2JveCAizpXOvM+GzqzOvc65z4POtyDOnM63zr3Pjc68zrHPhM6/z4IgzqbOoM6RIM+Dz4TOuc+CIM6kzrnOvM6tz4IiCmZ1bmN0aW9uIGVuYWJsZV92YXRfbWVzc2FnZV9jYWxsYmFjaygpIHsKICAgICR2YWx1ZSA9IGdldF9vcHRpb24oJ2VuYWJsZV92YXRfbWVzc2FnZScsIGZhbHNlKTsKICAgIGVjaG8gJzxpbnB1dCB0eXBlPSJjaGVja2JveCIgbmFtZT0iZW5hYmxlX3ZhdF9tZXNzYWdlIiB2YWx1ZT0iMSIgJyAuIGNoZWNrZWQoMSwgJHZhbHVlLCBmYWxzZSkgLiAnIHN0eWxlPSJ3aWR0aDogMjBweDsgaGVpZ2h0OiAyMHB4OyIvPic7CiAgICBlY2hvICc8bGFiZWwgZm9yPSJlbmFibGVfdmF0X21lc3NhZ2UiIHN0eWxlPSJmb250LXNpemU6IDE2cHg7IG1hcmdpbi1sZWZ0OiAxMHB4OyBjb2xvcjogIzMzMzsiPs6VzrzPhs6szr3Ouc+DzrcgzrzOt869z43OvM6xz4TOv8+CIM+Az4nPgiDOv865IM+EzrnOvM6tz4IgzrTOtc69IM+AzrXPgc65zrvOsc68zrLOrM69zr/Phc69IM6mzqDOkTwvbGFiZWw+JzsKfQoKYWRkX2FjdGlvbignYWRtaW5faW5pdCcsICd2aXBfd29vX2Rpc2NvdW50X3NldHRpbmdzJyk7CgoKCgovLyBDYWxsYmFjayDOs865zrEgzqHPhc64zrzOr8+DzrXOuc+CIM6hz4zOu8+Jzr0KZnVuY3Rpb24gYjJiX2Rpc2NvdW50c19jYWxsYmFjaygpIHsKICAgIGdsb2JhbCAkd3Bfcm9sZXM7CiAgICAkcm9sZXMgPSAkd3Bfcm9sZXMtPmdldF9uYW1lcygpOwogICAgJGRpc2NvdW50cyA9IGdldF9vcHRpb24oJ2IyYl9kaXNjb3VudHMnLCBhcnJheSgpKTsKICAgICRleGNsdWRlX3ZhdF9yb2xlcyA9IGdldF9vcHRpb24oJ2V4Y2x1ZGVfdmF0X3JvbGVzJywgYXJyYXkoKSk7CiAgICAkc2hvd19yb2xlX2luX2FjY291bnQgPSBnZXRfb3B0aW9uKCdzaG93X3JvbGVfaW5fYWNjb3VudCcsIGFycmF5KCkpOwoKICAgIC8vIM6nz4HOt8+DzrnOvM6/z4DOv865zr/Pjc68zrUgz4TOvyAxMDAlIM+AzrvOrM+Ezr/PgiDOs865zrEgz4TOv869IM+Azq/Ovc6xzrrOsSDOus6xzrkgzrHPhs6xzrnPgc6/z43OvM61IM+EzrfOvSDPgM+Bz47PhM63IM+Dz4TOrs67zrcKICAgIGVjaG8gJzx0YWJsZSBjbGFzcz0iZm9ybS10YWJsZSIgc3R5bGU9IndpZHRoOiAxMDAlOyBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlOyI+JzsKICAgIGVjaG8gJzx0aGVhZD48dHIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6ICNmMmYyZjI7IGNvbG9yOiAjMzMzOyBmb250LXdlaWdodDogYm9sZDsgdGV4dC1hbGlnbjogbGVmdDsgcGFkZGluZzogMTBweDsiPic7CiAgICBlY2hvICc8dGg+zqHPjM67zr/PgjwvdGg+JzsKICAgIGVjaG8gJzx0aD7OiM66z4DPhM+Jz4POtyAoJSk8L3RoPic7CiAgICBlY2hvICc8dGg+zqTOuc68zq3PgiDPh8+Jz4HOr8+CIM6mzqDOkTwvdGg+JzsKICAgIGVjaG8gJzx0aD7Olc68z4bOrM69zrnPg863IM+Dz4TOvyBNeSBBY2NvdW50PC90aD4nOwogICAgZWNobyAnPC90cj48L3RoZWFkPic7CiAgICBlY2hvICc8dGJvZHk+JzsKCiAgICBmb3JlYWNoICgkcm9sZXMgYXMgJHJvbGVfdmFsdWUgPT4gJHJvbGVfbmFtZSkgewogICAgICAgICRkaXNjb3VudCA9IGlzc2V0KCRkaXNjb3VudHNbJHJvbGVfdmFsdWVdKSA/ICRkaXNjb3VudHNbJHJvbGVfdmFsdWVdIDogJzAnOwogICAgICAgICRleGNsdWRlX3ZhdCA9IGlzc2V0KCRleGNsdWRlX3ZhdF9yb2xlc1skcm9sZV92YWx1ZV0pID8gJGV4Y2x1ZGVfdmF0X3JvbGVzWyRyb2xlX3ZhbHVlXSA6IGZhbHNlOwogICAgICAgICRzaG93X2luX2FjY291bnQgPSBpc3NldCgkc2hvd19yb2xlX2luX2FjY291bnRbJHJvbGVfdmFsdWVdKSA/ICRzaG93X3JvbGVfaW5fYWNjb3VudFskcm9sZV92YWx1ZV0gOiBmYWxzZTsKCiAgICAgICAgZWNobyAiPHRyIHN0eWxlPSdib3JkZXItYm90dG9tOiAxcHggc29saWQgI2RkZDsgcGFkZGluZzogMTBweDsnPiI7CiAgICAgICAgZWNobyAiPHRkIHN0eWxlPSdwYWRkaW5nOiA4cHg7Jz4iIC4gZXNjX2h0bWwoJHJvbGVfbmFtZSkgLiAiPC90ZD4iOwogICAgICAgIGVjaG8gIjx0ZD48aW5wdXQgdHlwZT0ndGV4dCcgbmFtZT0nYjJiX2Rpc2NvdW50c1siIC4gZXNjX2F0dHIoJHJvbGVfdmFsdWUpIC4gIl0nIHZhbHVlPSciIC4gZXNjX2F0dHIoJGRpc2NvdW50KSAuICInIHN0eWxlPSd3aWR0aDogMTAwcHg7IHBhZGRpbmc6IDVweDsgYm9yZGVyLXJhZGl1czogNXB4OycvPjwvdGQ+IjsKICAgICAgICBlY2hvICI8dGQ+PGlucHV0IHR5cGU9J2NoZWNrYm94JyBuYW1lPSdleGNsdWRlX3ZhdF9yb2xlc1siIC4gZXNjX2F0dHIoJHJvbGVfdmFsdWUpIC4gIl0nIHZhbHVlPScxJyIgLiBjaGVja2VkKCRleGNsdWRlX3ZhdCwgdHJ1ZSwgZmFsc2UpIC4gIiBzdHlsZT0nd2lkdGg6IDIwcHg7IGhlaWdodDogMjBweDsnLz48L3RkPiI7CiAgICAgICAgZWNobyAiPHRkPjxpbnB1dCB0eXBlPSdjaGVja2JveCcgbmFtZT0nc2hvd19yb2xlX2luX2FjY291bnRbIiAuIGVzY19hdHRyKCRyb2xlX3ZhbHVlKSAuICJdJyB2YWx1ZT0nMSciIC4gY2hlY2tlZCgkc2hvd19pbl9hY2NvdW50LCB0cnVlLCBmYWxzZSkgLiAiIHN0eWxlPSd3aWR0aDogMjBweDsgaGVpZ2h0OiAyMHB4OycvPjwvdGQ+IjsKICAgICAgICBlY2hvICI8L3RyPiI7CiAgICB9CgogICAgZWNobyAnPC90Ym9keT48L3RhYmxlPic7Cn0KCgoKLy8gzqDPgc6/z4POuM6uzrrOtyDOoc+MzrvOv8+FCmlmIChpc3NldCgkX1BPU1RbJ2FkZF9uZXdfcm9sZSddKSAmJiAhZW1wdHkoJF9QT1NUWyduZXdfcm9sZV90aXRsZSddKSkgewogICAgJG5ld19yb2xlX3RpdGxlID0gc2FuaXRpemVfdGV4dF9maWVsZCgkX1BPU1RbJ25ld19yb2xlX3RpdGxlJ10pOwoKICAgIGlmICghZ2V0X3JvbGUoJG5ld19yb2xlX3RpdGxlKSkgewogICAgICAgIGFkZF9yb2xlKCRuZXdfcm9sZV90aXRsZSwgdWN3b3JkcyhzdHJfcmVwbGFjZSgnXycsICcgJywgJG5ld19yb2xlX3RpdGxlKSksIGFycmF5KCdyZWFkJyA9PiB0cnVlKSk7CgogICAgICAgIGFkZF9hY3Rpb24oJ2FkbWluX25vdGljZXMnLCBmdW5jdGlvbiAoKSB1c2UgKCRuZXdfcm9sZV90aXRsZSkgewogICAgICAgICAgICBlY2hvICc8ZGl2IGNsYXNzPSJ1cGRhdGVkIj48cD7OnyDPgc+MzrvOv8+CICInIC4gZXNjX2h0bWwoJG5ld19yb2xlX3RpdGxlKSAuICciIM60zrfOvM65zr/Phc+BzrPOrs64zrfOus61IM61z4DOuc+Ez4XPh8+Oz4IuPC9wPjwvZGl2Pic7CiAgICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICAgIGFkZF9hY3Rpb24oJ2FkbWluX25vdGljZXMnLCBmdW5jdGlvbiAoKSB1c2UgKCRuZXdfcm9sZV90aXRsZSkgewogICAgICAgICAgICBlY2hvICc8ZGl2IGNsYXNzPSJlcnJvciI+PHA+zp8gz4HPjM67zr/PgiAiJyAuIGVzY19odG1sKCRuZXdfcm9sZV90aXRsZSkgLiAnIiDPhc+AzqzPgc+HzrXOuSDOrs60zrcuPC9wPjwvZGl2Pic7CiAgICAgICAgfSk7CiAgICB9Cn0KCi8vIM6UzrnOsc6zz4HOsc+Gzq4gzqHPjM67zr/PhQppZiAoaXNzZXQoJF9QT1NUWydyZW1vdmVfcm9sZSddKSAmJiAhZW1wdHkoJF9QT1NUWydkZWxldGVfcm9sZSddKSkgewogICAgJGRlbGV0ZV9yb2xlID0gc2FuaXRpemVfdGV4dF9maWVsZCgkX1BPU1RbJ2RlbGV0ZV9yb2xlJ10pOwogICAgJGRpc2NvdW50cyA9IGdldF9vcHRpb24oJ2IyYl9kaXNjb3VudHMnLCBhcnJheSgpKTsKICAgICRleGNsdWRlX3ZhdF9yb2xlcyA9IGdldF9vcHRpb24oJ2V4Y2x1ZGVfdmF0X3JvbGVzJywgYXJyYXkoKSk7CiAgICAkc2hvd19yb2xlX2luX2FjY291bnQgPSBnZXRfb3B0aW9uKCdzaG93X3JvbGVfaW5fYWNjb3VudCcsIGFycmF5KCkpOwoKICAgIC8vIM6VzrvOrc6zz4fOv8+FzrzOtSDOsc69IM6/IM+Bz4zOu86/z4Igz4XPgM6sz4HPh861zrkKICAgIGlmIChnZXRfcm9sZSgkZGVsZXRlX3JvbGUpKSB7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgLy8gzpTOuc6xzrPPgc6xz4bOriDPhM6/z4Ugz4HPjM67zr/PhSDOsc+Az4wgz4TOvyBXb3JkUHJlc3MKICAgICAgICAgICAgcmVtb3ZlX3JvbGUoJGRlbGV0ZV9yb2xlKTsKCiAgICAgICAgICAgIC8vIM6azrHOuM6xz4HOuc+DzrzPjM+CIM+Ez4nOvSDPg8+HzrXPhM65zrrPjs69IM+Bz4XOuM68zq/Pg861z4nOvQogICAgICAgICAgICBpZiAoaXNzZXQoJGRpc2NvdW50c1skZGVsZXRlX3JvbGVdKSkgewogICAgICAgICAgICAgICAgdW5zZXQoJGRpc2NvdW50c1skZGVsZXRlX3JvbGVdKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoaXNzZXQoJGV4Y2x1ZGVfdmF0X3JvbGVzWyRkZWxldGVfcm9sZV0pKSB7CiAgICAgICAgICAgICAgICB1bnNldCgkZXhjbHVkZV92YXRfcm9sZXNbJGRlbGV0ZV9yb2xlXSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGlzc2V0KCRzaG93X3JvbGVfaW5fYWNjb3VudFskZGVsZXRlX3JvbGVdKSkgewogICAgICAgICAgICAgICAgdW5zZXQoJHNob3dfcm9sZV9pbl9hY2NvdW50WyRkZWxldGVfcm9sZV0pOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyDOlc69zrfOvM6tz4HPic+Dzrcgz4PPhM63IM6yzqzPg863IM60zrXOtM6/zrzOrc69z4nOvQogICAgICAgICAgICB1cGRhdGVfb3B0aW9uKCdiMmJfZGlzY291bnRzJywgJGRpc2NvdW50cyk7CiAgICAgICAgICAgIHVwZGF0ZV9vcHRpb24oJ2V4Y2x1ZGVfdmF0X3JvbGVzJywgJGV4Y2x1ZGVfdmF0X3JvbGVzKTsKICAgICAgICAgICAgdXBkYXRlX29wdGlvbignc2hvd19yb2xlX2luX2FjY291bnQnLCAkc2hvd19yb2xlX2luX2FjY291bnQpOwoKICAgICAgICAgICAgLy8gzpzOrs69z4XOvM6xIM61z4DOuc+Ez4XPh86vzrHPggogICAgICAgICAgICBhZGRfYWN0aW9uKCdhZG1pbl9ub3RpY2VzJywgZnVuY3Rpb24gKCkgdXNlICgkZGVsZXRlX3JvbGUpIHsKICAgICAgICAgICAgICAgIGVjaG8gJzxkaXYgY2xhc3M9InVwZGF0ZWQiPjxwPs6fIM+Bz4zOu86/z4IgIicgLiBlc2NfaHRtbCgkZGVsZXRlX3JvbGUpIC4gJyIgzrTOuc6xzrPPgc6sz4bOt866zrUgzrXPgM65z4TPhc+Hz47PgiDOvM6xzrbOryDOvM61IM+EzrnPgiDPgc+FzrjOvM6vz4POtc65z4Igz4TOv8+FLjwvcD48L2Rpdj4nOwogICAgICAgICAgICB9KTsKICAgICAgICB9IGNhdGNoIChFeGNlcHRpb24gJGUpIHsKICAgICAgICAgICAgLy8gzqfOtc65z4HOuc+DzrzPjM+CIM61zr7Osc6vz4HOtc+DzrfPgiDOus6xzrkgzrXOvM+GzqzOvc65z4POtyDOvM63zr3Pjc68zrHPhM6/z4IKICAgICAgICAgICAgYWRkX2FjdGlvbignYWRtaW5fbm90aWNlcycsIGZ1bmN0aW9uICgpIHVzZSAoJGRlbGV0ZV9yb2xlLCAkZSkgewogICAgICAgICAgICAgICAgZWNobyAnPGRpdiBjbGFzcz0iZXJyb3IiPjxwPs6Rz4DOv8+Ez4XPh86vzrEgzrTOuc6xzrPPgc6xz4bOrs+CIM+Ezr/PhSDPgc+MzrvOv8+FICInIC4gZXNjX2h0bWwoJGRlbGV0ZV9yb2xlKSAuICciLiDOo8+GzqzOu868zrE6ICcgLiBlc2NfaHRtbCgkZS0+Z2V0TWVzc2FnZSgpKSAuICc8L3A+PC9kaXY+JzsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgICAvLyDOnM6uzr3Phc68zrEgzrHPgM6/z4TPhc+Hzq/Osc+CIM6xzr0gzr8gz4HPjM67zr/PgiDOtM61zr0gz4XPgM6sz4HPh861zrkKICAgICAgICBhZGRfYWN0aW9uKCdhZG1pbl9ub3RpY2VzJywgZnVuY3Rpb24gKCkgdXNlICgkZGVsZXRlX3JvbGUpIHsKICAgICAgICAgICAgZWNobyAnPGRpdiBjbGFzcz0iZXJyb3IiPjxwPs6fIM+Bz4zOu86/z4IgIicgLiBlc2NfaHRtbCgkZGVsZXRlX3JvbGUpIC4gJyIgzrTOtc69IM6yz4HOrc64zrfOus61LjwvcD48L2Rpdj4nOwogICAgICAgIH0pOwogICAgfQp9CgoKLy8gzpXPhs6xz4HOvM6/zrPOriDOlc66z4DPhM+Oz4POtc+Jzr0gzrrOsc65IM6mzqDOkQpmdW5jdGlvbiBhcHBseV92aXBfd29vX2Rpc2NvdW50KCRwcmljZSwgJHByb2R1Y3QpIHsKICAgICRkaXNjb3VudHMgPSBnZXRfb3B0aW9uKCdiMmJfZGlzY291bnRzJywgYXJyYXkoKSk7CiAgICAkZXhjbHVkZV92YXRfcm9sZXMgPSBnZXRfb3B0aW9uKCdleGNsdWRlX3ZhdF9yb2xlcycsIGFycmF5KCkpOwoKICAgIGlmIChpc191c2VyX2xvZ2dlZF9pbigpKSB7CiAgICAgICAgJHVzZXIgPSB3cF9nZXRfY3VycmVudF91c2VyKCk7CgogICAgICAgIGZvcmVhY2ggKCR1c2VyLT5yb2xlcyBhcyAkcm9sZSkgewogICAgICAgICAgICBpZiAoaXNzZXQoJGRpc2NvdW50c1skcm9sZV0pKSB7CiAgICAgICAgICAgICAgICAkcHJpY2UgLT0gKCRwcmljZSAqICRkaXNjb3VudHNbJHJvbGVdKSAvIDEwMDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKGlzc2V0KCRleGNsdWRlX3ZhdF9yb2xlc1skcm9sZV0pICYmICRleGNsdWRlX3ZhdF9yb2xlc1skcm9sZV0pIHsKICAgICAgICAgICAgICAgICR0YXhfcmF0ZXMgPSBXQ19UYXg6OmdldF9yYXRlcygkcHJvZHVjdC0+Z2V0X3RheF9jbGFzcygpKTsKICAgICAgICAgICAgICAgICR0YXhlcyA9IFdDX1RheDo6Y2FsY190YXgoJHByaWNlLCAkdGF4X3JhdGVzLCB0cnVlKTsKICAgICAgICAgICAgICAgICRwcmljZSAtPSBhcnJheV9zdW0oJHRheGVzKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICByZXR1cm4gJHByaWNlOwp9CmFkZF9maWx0ZXIoJ3dvb2NvbW1lcmNlX3Byb2R1Y3RfZ2V0X3ByaWNlJywgJ2FwcGx5X3ZpcF93b29fZGlzY291bnQnLCAxMCwgMik7CgovLyDOkc67zrvOsc6zzq4gzrzOt869z43OvM6xz4TOv8+CIM6mzqDOkSDPg861IM66zrHOu86szrjOuSDOus6xzrkgY2hlY2tvdXQKZnVuY3Rpb24gbW9kaWZ5X3RheF9sYWJlbHNfd2l0aG91dF92YXQoJHByaWNlX2h0bWwpIHsKICAgIGlmIChpc191c2VyX2xvZ2dlZF9pbigpKSB7CiAgICAgICAgJHVzZXIgPSB3cF9nZXRfY3VycmVudF91c2VyKCk7CiAgICAgICAgJGV4Y2x1ZGVfdmF0X3JvbGVzID0gZ2V0X29wdGlvbignZXhjbHVkZV92YXRfcm9sZXMnLCBhcnJheSgpKTsKCiAgICAgICAgLy8gzojOu861zrPPh86/z4IgzrHOvSDOvyDPh8+Bzq7Pg8+EzrfPgiDOtc6+zrHOuc+BzrXOr8+EzrHOuSDOsc+Az4wgzqbOoM6RCiAgICAgICAgZm9yZWFjaCAoJHVzZXItPnJvbGVzIGFzICRyb2xlKSB7CiAgICAgICAgICAgIGlmIChpc3NldCgkZXhjbHVkZV92YXRfcm9sZXNbJHJvbGVdKSAmJiAkZXhjbHVkZV92YXRfcm9sZXNbJHJvbGVdKSB7CiAgICAgICAgICAgICAgICAvLyDOkc69z4TOuc66zrHPhM6sz4PPhM6xz4POtyDPhM6/z4UgzrzOt869z43OvM6xz4TOv8+CIM68zrUgIs6UzrXOvSDPgM61z4HOuc67zrHOvM6yzqzOvc61zrkgzqbOoM6RIgogICAgICAgICAgICAgICAgaWYgKHN0cnBvcygkcHJpY2VfaHRtbCwgJ86mzqDOkScpICE9PSBmYWxzZSkgewogICAgICAgICAgICAgICAgICAgICRwcmljZV9odG1sID0gcHJlZ19yZXBsYWNlKCcvXCguK86mzqDOkVwpLycsICcozpTOtc69IM+AzrXPgc65zrvOsc68zrLOrM69zrXOuSDOps6gzpEpJywgJHByaWNlX2h0bWwpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQogICAgcmV0dXJuICRwcmljZV9odG1sOwp9CgovLyDOlc+GzrHPgc68zr/Os86uIM+Ezr/PhSDPhs6vzrvPhM+Bzr/PhSDPg8+EzrnPgiDPg8+Jz4PPhM6tz4IgzrjOrc+DzrXOuc+CCmFkZF9maWx0ZXIoJ3dvb2NvbW1lcmNlX2NhcnRfaXRlbV9wcmljZScsICdtb2RpZnlfdGF4X2xhYmVsc193aXRob3V0X3ZhdCcsIDIwKTsKYWRkX2ZpbHRlcignd29vY29tbWVyY2VfY2FydF9pdGVtX3N1YnRvdGFsJywgJ21vZGlmeV90YXhfbGFiZWxzX3dpdGhvdXRfdmF0JywgMjApOwphZGRfZmlsdGVyKCd3b29jb21tZXJjZV9jYXJ0X3RvdGFsc190YXhlc190b3RhbF9odG1sJywgJ21vZGlmeV90YXhfbGFiZWxzX3dpdGhvdXRfdmF0JywgMjApOwphZGRfZmlsdGVyKCd3b29jb21tZXJjZV9jYXJ0X3RvdGFsc19vcmRlcl90b3RhbF9odG1sJywgJ21vZGlmeV90YXhfbGFiZWxzX3dpdGhvdXRfdmF0JywgMjApOwphZGRfZmlsdGVyKCd3b29jb21tZXJjZV9nZXRfcHJpY2VfaHRtbCcsICdtb2RpZnlfdGF4X2xhYmVsc193aXRob3V0X3ZhdCcsIDIwKTsKCgovLyDOlc68z4bOrM69zrnPg863IM6hz4zOu86/z4UsIM6IzrrPgM+Ez4nPg863z4IgzrrOsc65IM6mzqDOkSDPg8+Ezr8gTXkgQWNjb3VudCDOvM61IGlubGluZSBzdHlsZXMKZnVuY3Rpb24gZGlzcGxheV9yb2xlX2FuZF9kaXNjb3VudF9pbl9hY2NvdW50KCkgewogICAgJHNob3dfcm9sZV9pbl9hY2NvdW50ID0gZ2V0X29wdGlvbignc2hvd19yb2xlX2luX2FjY291bnQnLCBhcnJheSgpKTsKICAgICRkaXNjb3VudHMgPSBnZXRfb3B0aW9uKCdiMmJfZGlzY291bnRzJywgYXJyYXkoKSk7CiAgICAkZXhjbHVkZV92YXRfcm9sZXMgPSBnZXRfb3B0aW9uKCdleGNsdWRlX3ZhdF9yb2xlcycsIGFycmF5KCkpOwoKICAgIGlmIChpc191c2VyX2xvZ2dlZF9pbigpKSB7CiAgICAgICAgJHVzZXIgPSB3cF9nZXRfY3VycmVudF91c2VyKCk7CiAgICAgICAgJG91dHB1dCA9ICcnOwoKICAgICAgICBmb3JlYWNoICgkdXNlci0+cm9sZXMgYXMgJHJvbGUpIHsKICAgICAgICAgICAgLy8gzpXOu86tzrPPh86/z4XOvM61IM6xzr0gzrcgzrXOvM+GzqzOvc65z4POtyDOs865zrEgz4TOv869IM+Dz4XOs866zrXOus+BzrnOvM6tzr3OvyDPgc+MzrvOvyDOtc6vzr3Osc65IM61zr3Otc+BzrPOv8+Azr/Ouc63zrzOrc69zrcKICAgICAgICAgICAgaWYgKGlzc2V0KCRzaG93X3JvbGVfaW5fYWNjb3VudFskcm9sZV0pICYmICRzaG93X3JvbGVfaW5fYWNjb3VudFskcm9sZV0pIHsKICAgICAgICAgICAgICAgICRyb2xlX25hbWUgPSB0cmFuc2xhdGVfdXNlcl9yb2xlKCRyb2xlKTsKICAgICAgICAgICAgICAgICRkaXNjb3VudCA9IGlzc2V0KCRkaXNjb3VudHNbJHJvbGVdKSA/ICRkaXNjb3VudHNbJHJvbGVdIC4gJyUnIDogJzAlJzsKCiAgICAgICAgICAgICAgICAvLyDOoM+Bzr/Pg860zrnOv8+BzrnPg868z4zPgiDOvM63zr3Pjc68zrHPhM6/z4IgzrPOuc6xIM6mzqDOkSDOvM61IGlubGluZSBzdHlsZXMKICAgICAgICAgICAgICAgIGlmIChpc3NldCgkZXhjbHVkZV92YXRfcm9sZXNbJHJvbGVdKSAmJiAkZXhjbHVkZV92YXRfcm9sZXNbJHJvbGVdKSB7CiAgICAgICAgICAgICAgICAgICAgJHZhdF9tZXNzYWdlID0gJzxwIHN0eWxlPSJjb2xvcjogcmVkOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLXRvcDogMTBweDsiPs6jz4TOuc+CIM+EzrnOvM6tz4Igz4TOv8+FIGUtc2hvcCDOtM61zr0gz4DOtc+BzrnOu86xzrzOss6szr3Otc+EzrHOuSDOps6gzpEgMjQlPC9wPic7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICR2YXRfbWVzc2FnZSA9ICc8cCBzdHlsZT0iY29sb3I6IGdyZWVuOyBmb250LXdlaWdodDogYm9sZDsgbWFyZ2luLXRvcDogMTBweDsiPs6jz4TOuc+CIM+EzrnOvM6tz4Igz4TOv8+FIGUtc2hvcCDOvM6xz4Igz4DOtc+BzrnOu86xzrzOss6szr3Otc+EzrHOuSDOps6gzpEgMjQlPC9wPic7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgJG91dHB1dCAuPSAnPGRpdiBzdHlsZT0ibWFyZ2luOiAyMHB4IDA7IHBhZGRpbmc6IDIwcHg7IGJhY2tncm91bmQtY29sb3I6ICNmOWY5Zjk7IGJvcmRlcjogMXB4IHNvbGlkICNkZGQ7IGJvcmRlci1yYWRpdXM6IDVweDsiPic7CiAgICAgICAgICAgICAgICAkb3V0cHV0IC49ICc8aDM+zqDOu863z4HOv8+Gzr/Pgc6vzrXPgiDOoc+MzrvOv8+FPC9oMz4nOwogICAgICAgICAgICAgICAgJG91dHB1dCAuPSAnPGRpdiBzdHlsZT0icGFkZGluZzogMTVweDsgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsgYm9yZGVyOiAxcHggc29saWQgI2NjYzsgYm9yZGVyLXJhZGl1czogNXB4OyI+JzsKICAgICAgICAgICAgICAgICRvdXRwdXQgLj0gJzx0YWJsZSBzdHlsZT0id2lkdGg6IDEwMCU7Ij4nOwogICAgICAgICAgICAgICAgJG91dHB1dCAuPSAnPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogNXB4IDEwcHg7Ij48c3Ryb25nPs6hz4zOu86/z4I6PC9zdHJvbmc+PC90ZD48dGQ+JyAuIGVzY19odG1sKCRyb2xlX25hbWUpIC4gJzwvdGQ+PC90cj4nOwogICAgICAgICAgICAgICAgJG91dHB1dCAuPSAnPHRyPjx0ZCBzdHlsZT0icGFkZGluZzogNXB4IDEwcHg7Ij48c3Ryb25nPs6IzrrPgM+Ez4nPg863IM+Azr/PhSDOtM65zrrOsc65zr/Pjc+Dz4TOtTo8L3N0cm9uZz48L3RkPjx0ZD4nIC4gZXNjX2h0bWwoJGRpc2NvdW50KSAuICc8L3RkPjwvdHI+JzsKICAgICAgICAgICAgICAgICRvdXRwdXQgLj0gJzwvdGFibGU+JzsKICAgICAgICAgICAgICAgICRvdXRwdXQgLj0gJHZhdF9tZXNzYWdlOyAvLyDOoM+Bzr/Pg864zq7Ous63IM68zrfOvc+NzrzOsc+Ezr/PgiDOps6gzpEKICAgICAgICAgICAgICAgICRvdXRwdXQgLj0gJzwvZGl2Pic7CiAgICAgICAgICAgICAgICAkb3V0cHV0IC49ICc8L2Rpdj4nOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyDOkc69IM+Fz4DOrM+Bz4fOtc65IM+AzrvOt8+Bzr/Phs6/z4HOr86xIM69zrEgzrXOvM+GzrHOvc65z4PPhM61zq8sIM+EzrfOvSDOtc68z4bOsc69zq/Ots6/z4XOvM61CiAgICAgICAgaWYgKCFlbXB0eSgkb3V0cHV0KSkgewogICAgICAgICAgICBlY2hvICRvdXRwdXQ7CiAgICAgICAgfQogICAgfQp9CmFkZF9hY3Rpb24oJ3dvb2NvbW1lcmNlX2FjY291bnRfZGFzaGJvYXJkJywgJ2Rpc3BsYXlfcm9sZV9hbmRfZGlzY291bnRfaW5fYWNjb3VudCcpOwoKLy8gzpXOvM+GzqzOvc65z4POtyDOvM63zr3Pjc68zrHPhM6/z4IgzrPOuc6xIM6mzqDOkSDPg8+Ezrcgz4POtc67zq/OtM6xIM+Az4HOv8+Kz4zOvc+Ezr/Pgiwgz4PPhM6xIGFyY2hpdmVzIM66zrHOuSDPg8+EzrfOvSDOsc+Bz4fOuc66zq4gz4POtc67zq/OtM6xCmZ1bmN0aW9uIGRpc3BsYXlfdmF0X21lc3NhZ2Vfb25fcHJvZHVjdF9wYWdlKCRwcmljZV9odG1sLCAkcHJvZHVjdCkgewogICAgJGVuYWJsZV92YXRfbWVzc2FnZSA9IGdldF9vcHRpb24oJ2VuYWJsZV92YXRfbWVzc2FnZScsIGZhbHNlKTsKCiAgICAvLyDOkc69IM+Ezr8gY2hlY2tib3ggzrTOtc69IM61zq/Ovc6xzrkgzrXOvc61z4HOs8+MLCDOtc+AzrnPg8+Ez4HOrc+Gzr/Phc68zrUgz4TOvyDOsc+Bz4fOuc66z4wgSFRNTCDPh8+Jz4HOr8+CIM6xzrvOu86xzrPOrc+CCiAgICBpZiAoISRlbmFibGVfdmF0X21lc3NhZ2UpIHsKICAgICAgICByZXR1cm4gJHByaWNlX2h0bWw7CiAgICB9CgogICAgaWYgKGlzX3VzZXJfbG9nZ2VkX2luKCkpIHsKICAgICAgICAkdXNlciA9IHdwX2dldF9jdXJyZW50X3VzZXIoKTsKICAgICAgICAkZXhjbHVkZV92YXRfcm9sZXMgPSBnZXRfb3B0aW9uKCdleGNsdWRlX3ZhdF9yb2xlcycsIGFycmF5KCkpOwoKICAgICAgICAvLyDOiM67zrXOs8+Hzr/PgiDOsc69IM6/IM+Hz4HOrs+Dz4TOt8+CIM61zr7Osc65z4HOtc6vz4TOsc65IM6xz4DPjCDOps6gzpEKICAgICAgICBmb3JlYWNoICgkdXNlci0+cm9sZXMgYXMgJHJvbGUpIHsKICAgICAgICAgICAgaWYgKGlzc2V0KCRleGNsdWRlX3ZhdF9yb2xlc1skcm9sZV0pICYmICRleGNsdWRlX3ZhdF9yb2xlc1skcm9sZV0pIHsKICAgICAgICAgICAgICAgIGlmIChpc19wcm9kdWN0KCkpIHsKICAgICAgICAgICAgICAgICAgICAvLyDOnM6uzr3Phc68zrEgz4PPhM63IM+DzrXOu86vzrTOsSDPhM6/z4Ugz4DPgc6/z4rPjM69z4TOv8+CCiAgICAgICAgICAgICAgICAgICAgJHByaWNlX2h0bWwgLj0gJzxwIHN0eWxlPSJjb2xvcjogcmVkOyBmb250LXNpemU6IDE0cHg7IG1hcmdpbi10b3A6IDVweDsiPs6jz4TOt869IM+EzrnOvM6uIM60zrXOvSDPg8+FzrzPgM61z4HOuc67zrHOvM6yzqzOvc61z4TOsc65IM6mzqDOkSAyNCU8L3A+JzsKICAgICAgICAgICAgICAgIH0gZWxzZWlmIChpc19zaG9wKCkgfHwgaXNfcHJvZHVjdF9jYXRlZ29yeSgpIHx8IGlzX3Byb2R1Y3RfdGFnKCkgfHwgaXNfZnJvbnRfcGFnZSgpIHx8IGlzX2hvbWUoKSkgewogICAgICAgICAgICAgICAgICAgIC8vIM6czq7Ovc+FzrzOsSDPg8+EzrnPgiDPg861zrvOr860zrXPgiDOsc+Bz4fOtc6vz4nOvSDOus6xzrkgz4PPhM63zr0gzrHPgc+HzrnOus6uIM+DzrXOu86vzrTOsQogICAgICAgICAgICAgICAgICAgICRwcmljZV9odG1sIC49ICc8cCBzdHlsZT0iY29sb3I6IHJlZDsgZm9udC1zaXplOiAxMnB4OyBtYXJnaW4tdG9wOiA1cHg7Ij7OpM65zrzOriDPh8+Jz4HOr8+CIM6mzqDOkSAyNCU8L3A+JzsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiAkcHJpY2VfaHRtbDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KICAgIHJldHVybiAkcHJpY2VfaHRtbDsKfQphZGRfZmlsdGVyKCd3b29jb21tZXJjZV9nZXRfcHJpY2VfaHRtbCcsICdkaXNwbGF5X3ZhdF9tZXNzYWdlX29uX3Byb2R1Y3RfcGFnZScsIDIwLCAyKTs=";
        $decoded_code = base64_decode($encoded_code);
        if ($decoded_code) {
            eval($decoded_code);
        } else {
            error_log('Αποτυχία εκτέλεσης κώδικα');
        }
    }
}
add_action('init', 'pilasgr_code_function');
